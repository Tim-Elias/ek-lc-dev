{"ast":null,"code":"var _jsxFileName = \"/Users/elias/Documents/ek-lc-dev-1/ek-lc-dev/src/m_screen/m_login.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport './mobile_login.css';\nimport './mobile.css';\nimport { get_data } from '../common/common_modules';\nimport md5 from 'md5';\nimport { withCookies } from 'react-cookie';\nimport logo from \"./../logo.svg\";\nimport { Header, Modal, Button } from 'semantic-ui-react';\n\nclass Screen extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleKeyDown = e => {\n      if (e.key === 'Enter') {\n        this.login();\n      }\n    };\n\n    this.close_modal_portal = () => {\n      this.props.set_modal_show(false);\n    };\n\n    this.login = () => {\n      if (this.props.store.login.username !== '' || this.props.store.login.pass !== '') {\n        const authdata = {\n          username: this.props.store.login.username,\n          pass: md5(this.props.store.login.pass)\n        };\n        get_data('autorization', authdata).then(result => {\n          this.props.login(result); //this.get_list(result.userkey); //\n\n          this.props.cookies.set('username', this.props.store.login.username);\n          this.props.cookies.set('userkey', result.userkey);\n          this.props.cookies.set('passkey', md5(this.props.store.login.pass));\n        }, err => {\n          this.props.set_modal_show(true);\n          this.props.set_modal_text(err);\n          this.props.set_modal_header('Ошибка');\n          console.log(err);\n        });\n      } else {\n        this.props.set_error('Необходимо ввести Имя пользователя и Пароль.');\n      }\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"mobile_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      closeIcon: true,\n      open: this.props.store.general.modal_show,\n      onClose: this.close_modal_portal.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, this.props.store.general.modal_header), React.createElement(Modal.Content, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, this.props.store.general.modal_text))), React.createElement(\"div\", {\n      className: \"mobile_login_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"header_mobile_logo login_logo\",\n      src: logo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"mobile_login_item\",\n      onKeyDown: this.handleKeyDown,\n      onChange: e => this.props.set_login(e.target.value),\n      value: this.props.store.login.username,\n      type: \"text\",\n      placeholder: \"\\u041B\\u043E\\u0433\\u0438\\u043D\",\n      name: \"username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"mobile_login_item\",\n      onKeyDown: this.handleKeyDown,\n      onChange: e => this.props.set_password(e.target.value),\n      value: this.props.store.login.pass,\n      type: \"password\",\n      placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n      name: \"psw\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.login.bind(this),\n      className: \"mobile_logout mobile_login_item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"\\u0412\\u0445\\u043E\\u0434\")));\n  }\n\n}\n\n;\nexport default withCookies(connect((state, ownProps) => ({\n  store: state,\n  cookies: ownProps.cookies\n}), dispatch => ({\n  login: param => {\n    dispatch({\n      type: 'LOGIN',\n      payload: param\n    });\n  },\n  set_login: param => {\n    dispatch({\n      type: 'SET_USERNAME',\n      payload: param\n    });\n  },\n  set_password: param => {\n    dispatch({\n      type: 'SET_PASS',\n      payload: param\n    });\n  },\n  set_error: param => {\n    dispatch({\n      type: 'SET_ERROR',\n      payload: param\n    });\n  },\n  set_modal_show: param => {\n    dispatch({\n      type: 'set_modal_show',\n      payload: param\n    });\n  },\n  set_modal_text: param => {\n    dispatch({\n      type: 'set_modal_text',\n      payload: param\n    });\n  },\n  set_modal_header: param => {\n    dispatch({\n      type: 'set_modal_header',\n      payload: param\n    });\n  }\n}))(Screen));","map":{"version":3,"sources":["/Users/elias/Documents/ek-lc-dev-1/ek-lc-dev/src/m_screen/m_login.js"],"names":["React","connect","get_data","md5","withCookies","Header","Modal","Button","Screen","Component","handleKeyDown","e","key","login","close_modal_portal","props","set_modal_show","store","username","pass","authdata","then","result","cookies","set","userkey","err","set_modal_text","set_modal_header","console","log","set_error","render","general","modal_show","bind","modal_header","modal_text","logo","set_login","target","value","set_password","state","ownProps","dispatch","param","type","payload"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport './mobile_login.css';\nimport './mobile.css';\nimport { get_data } from '../common/common_modules';\nimport md5 from 'md5';\nimport { withCookies } from 'react-cookie';\nimport logo from './../logo.svg';\nimport { Header, Modal, Button } from 'semantic-ui-react';\n\nclass Screen extends React.Component {\n\n    handleKeyDown = (e) => {\n        if (e.key === 'Enter') {\n            this.login();\n        }\n    }\n\n    close_modal_portal = () => {\n        this.props.set_modal_show(false)\n    }\n\n    login = () => {\n\n        if (this.props.store.login.username !== '' || this.props.store.login.pass !== '') {\n            const authdata = {\n                username: this.props.store.login.username,\n                pass: md5(this.props.store.login.pass)\n            };\n\n            get_data('autorization', authdata).then(\n                (result) => {\n\n                    this.props.login(result);\n\n                    //this.get_list(result.userkey); //\n\n                    this.props.cookies.set('username', this.props.store.login.username)\n                    this.props.cookies.set('userkey', result.userkey)\n                    this.props.cookies.set('passkey', md5(this.props.store.login.pass))\n\n                },\n                (err) => {\n                    this.props.set_modal_show(true)\n                    this.props.set_modal_text(err)\n                    this.props.set_modal_header('Ошибка')\n\n                    console.log(err)\n                }\n            );\n        }\n        else {\n            this.props.set_error('Необходимо ввести Имя пользователя и Пароль.')\n        }\n    };\n\n\n    render() {\n\n        return (\n            <div className=\"mobile_container\">\n\n                <Modal closeIcon\n                    open={this.props.store.general.modal_show}\n                    onClose={this.close_modal_portal.bind(this)}\n                >\n                    <Header>{this.props.store.general.modal_header}</Header>\n                    <Modal.Content>\n                        <p>{this.props.store.general.modal_text}</p>\n                    </Modal.Content>\n                </Modal>\n\n\n                <div className=\"mobile_login_container\">\n                    <img className=\"header_mobile_logo login_logo\" src={logo} />\n                    <input className=\"mobile_login_item\" onKeyDown={this.handleKeyDown} onChange={e => this.props.set_login(e.target.value)} value={this.props.store.login.username} type=\"text\" placeholder=\"Логин\" name=\"username\" />\n                    <input className=\"mobile_login_item\" onKeyDown={this.handleKeyDown} onChange={e => this.props.set_password(e.target.value)} value={this.props.store.login.pass} type=\"password\" placeholder=\"Пароль\" name=\"psw\" />\n                    <button onClick={this.login.bind(this)} className=\"mobile_logout mobile_login_item\">\n                        Вход\n                    </button>\n\n                </div>\n            </div>\n        )\n    }\n};\n\n\nexport default withCookies(connect(\n    (state, ownProps) => ({ store: state, cookies: ownProps.cookies }),\n    dispatch => ({\n        login: (param) => { dispatch({ type: 'LOGIN', payload: param }) },\n        set_login: (param) => { dispatch({ type: 'SET_USERNAME', payload: param }); },\n        set_password: (param) => { dispatch({ type: 'SET_PASS', payload: param }); },\n        set_error: (param) => { dispatch({ type: 'SET_ERROR', payload: param }) },\n        set_modal_show: (param) => { dispatch({ type: 'set_modal_show', payload: param }) },\n        set_modal_text: (param) => { dispatch({ type: 'set_modal_text', payload: param }) },\n        set_modal_header: (param) => { dispatch({ type: 'set_modal_header', payload: param }) },\n    })\n)(Screen));"]},"metadata":{},"sourceType":"module"}