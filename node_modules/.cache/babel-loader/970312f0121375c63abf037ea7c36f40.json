{"ast":null,"code":"var _jsxFileName = \"/Users/elias/Documents/ek-lc-dev-1/ek-lc-dev/src/screen/storage_reciept.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Sound from 'react-sound';\nimport done_sound from './../common/ping.mp3';\nimport err_sound from './../common/err.mp3';\nimport funk_sound from './../common/funk.mp3';\nimport { get_data } from './../common/common_modules';\nimport leftmenu from './components/leftmenu';\n\nclass Screen extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.done_sound_play = () => {\n      this.props.storage_reciept_set_done_sound(Sound.status.PLAYING);\n    };\n\n    this.err_sound_play = () => {\n      this.props.storage_reciept_set_err_sound(Sound.status.PLAYING);\n    };\n\n    this.funk_sound_play = () => {\n      this.props.storage_reciept_set_funk_sound(Sound.status.PLAYING);\n    };\n\n    this.send_req = () => {\n      if (this.props.store.storage_reciept.barcode.substring(0, 9) === \"0000-0000\") {\n        let zone = this.props.store.storage_reciept.barcode.substring(10);\n        let find_zone = this.props.store.storage_reciept.zone_list.find(el => el === zone);\n        console.log(find_zone);\n\n        if (find_zone === undefined) {\n          this.props.storage_reciept_set_barcode('');\n          this.props.storage_reciept_set_status_type('err');\n          this.props.storage_reciept_set_status_message('Зона хранения не найдена');\n          this.err_sound_play();\n        } else {\n          this.props.storage_reciept_set_selected_zone(zone);\n          this.props.storage_reciept_set_barcode('');\n          this.props.storage_reciept_set_status_message('');\n          this.props.storage_reciept_set_status_type(null);\n          this.funk_sound_play();\n        }\n      } else {\n        this.props.modules.set_active_window(\"wait\");\n        const data = {\n          userkey: this.props.store.login.userkey,\n          barcode: this.props.store.storage_reciept.barcode,\n          zone: this.props.store.storage_reciept.selected_zone,\n          storage: this.props.store.storage_reciept.storage.id\n        };\n        get_data('storagereciept', data).then(result => {\n          this.props.modules.set_active_window(\"storage_reciept\");\n          this.props.storage_reciept_set_result(result);\n          this.props.storage_reciept_set_barcode('');\n\n          if (result.status_type === 'ok') {\n            this.done_sound_play();\n          } else {\n            this.err_sound_play();\n          }\n        }, err => {\n          this.props.modules.set_active_window(\"storage_reciept\");\n          this.props.storage_reciept_set_result({\n            status_type: 'err',\n            status_message: err\n          });\n          this.err_sound_play();\n        });\n      }\n    };\n  }\n\n  render() {\n    let done_sound_status;\n\n    if (this.props.store.storage_reciept.done_sound === undefined) {\n      done_sound_status = Sound.status.STOPPED;\n    } else {\n      done_sound_status = this.props.store.storage_reciept.done_sound;\n    }\n\n    let funk_sound_status;\n\n    if (this.props.store.storage_reciept.funk_sound === undefined) {\n      funk_sound_status = Sound.status.STOPPED;\n    } else {\n      funk_sound_status = this.props.store.storage_reciept.funk_sound;\n    }\n\n    let err_sound_status;\n\n    if (this.props.store.storage_reciept.err_sound === undefined) {\n      err_sound_status = Sound.status.STOPPED;\n    } else {\n      err_sound_status = this.props.store.storage_reciept.err_sound;\n    }\n\n    const send_req = this.send_req;\n\n    document.onkeydown = function (event) {\n      try {\n        if (event.keyCode === 13) {\n          send_req();\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"disp_map_button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"ui button mini\",\n      onClick: () => {\n        this.props.set_full_screen();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"\\u041F\\u043E\\u043B\\u043D\\u043E\\u044D\\u043A\\u0440\\u0430\\u043D\\u043D\\u044B\\u0439 \\u0440\\u0435\\u0436\\u0438\\u043C\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"\\u0422\\u0435\\u043A\\u0443\\u0449\\u0438\\u0439 \\u0441\\u043A\\u043B\\u0430\\u0434: \", this.props.store.storage_reciept.storage.name), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"\\u0417\\u043E\\u043D\\u0430 \\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\u0438\\u044F: \", this.props.store.storage_reciept.selected_zone), React.createElement(\"input\", {\n      autoFocus: true,\n      value: this.props.store.storage_reciept.barcode,\n      onChange: e => {\n        this.props.storage_reciept_set_barcode(e.target.value);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), this.props.store.storage_reciept.status_type === \"ok\" ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"\\u041D\\u0430\\u043A\\u043B\\u0430\\u0434\\u043D\\u0430\\u044F: \", this.props.store.storage_reciept.num, \" \"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"\\u0417\\u0430\\u0434\\u0430\\u0447\\u0430: \", this.props.store.storage_reciept.task_type, \" \"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"\\u0414\\u0430\\u0442\\u0430: \", this.props.store.storage_reciept.task_date), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"\\u041A\\u0443\\u0440\\u044C\\u0435\\u0440: \", this.props.store.storage_reciept.task_value), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"\\u0417\\u0430\\u043A\\u0430\\u0437\\u0447\\u0438\\u043A: \", this.props.store.storage_reciept.customer), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"\\u0413\\u043E\\u0440\\u043E\\u0434: \", this.props.store.storage_reciept.rec_city), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"\\u0410\\u0434\\u0440\\u0435\\u0441: \", this.props.store.storage_reciept.rec_adress), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"\\u0420\\u0430\\u0439\\u043E\\u043D: \", this.props.store.storage_reciept.rec_district), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0442\\u0435\\u043B\\u044C: \", this.props.store.storage_reciept.rec_name)) : null, this.props.store.storage_reciept.status_type === \"err\" ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, this.props.store.storage_reciept.status_message) : null, React.createElement(Sound, {\n      url: done_sound,\n      playStatus: done_sound_status,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(Sound, {\n      url: err_sound,\n      playStatus: err_sound_status,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }), React.createElement(Sound, {\n      url: funk_sound,\n      playStatus: funk_sound_status,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default connect(state => ({\n  store: state\n}), dispatch => ({\n  storage_reciept_set_barcode: param => {\n    dispatch({\n      type: 'storage_reciept_set_barcode',\n      payload: param\n    });\n  },\n  storage_reciept_set_result: param => {\n    dispatch({\n      type: 'storage_reciept_set_result',\n      payload: param\n    });\n  },\n  storage_reciept_set_selected_zone: param => {\n    dispatch({\n      type: 'storage_reciept_set_selected_zone',\n      payload: param\n    });\n  },\n  set_full_screen: () => {\n    dispatch({\n      type: 'set_full_screen'\n    });\n  },\n  storage_reciept_set_done_sound: param => {\n    dispatch({\n      type: 'storage_reciept_set_done_sound',\n      payload: param\n    });\n  },\n  storage_reciept_set_err_sound: param => {\n    dispatch({\n      type: 'storage_reciept_set_err_sound',\n      payload: param\n    });\n  },\n  storage_reciept_set_funk_sound: param => {\n    dispatch({\n      type: 'storage_reciept_set_funk_sound',\n      payload: param\n    });\n  },\n  storage_reciept_set_status_message: param => {\n    dispatch({\n      type: 'storage_reciept_set_status_message',\n      payload: param\n    });\n  },\n  storage_reciept_set_status_type: param => {\n    dispatch({\n      type: 'storage_reciept_set_status_type',\n      payload: param\n    });\n  }\n}))(Screen);","map":{"version":3,"sources":["/Users/elias/Documents/ek-lc-dev-1/ek-lc-dev/src/screen/storage_reciept.js"],"names":["React","connect","Sound","done_sound","err_sound","funk_sound","get_data","leftmenu","Screen","Component","done_sound_play","props","storage_reciept_set_done_sound","status","PLAYING","err_sound_play","storage_reciept_set_err_sound","funk_sound_play","storage_reciept_set_funk_sound","send_req","store","storage_reciept","barcode","substring","zone","find_zone","zone_list","find","el","console","log","undefined","storage_reciept_set_barcode","storage_reciept_set_status_type","storage_reciept_set_status_message","storage_reciept_set_selected_zone","modules","set_active_window","data","userkey","login","selected_zone","storage","id","then","result","storage_reciept_set_result","status_type","err","status_message","render","done_sound_status","STOPPED","funk_sound_status","err_sound_status","document","onkeydown","event","keyCode","e","set_full_screen","name","target","value","num","task_type","task_date","task_value","customer","rec_city","rec_adress","rec_district","rec_name","state","dispatch","param","type","payload"],"mappings":"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","sourcesContent":["import React  from 'react';\nimport { connect } from 'react-redux';\nimport Sound from 'react-sound';\nimport done_sound from './../common/ping.mp3'\nimport err_sound from './../common/err.mp3'\nimport funk_sound from './../common/funk.mp3'\nimport { get_data } from './../common/common_modules'\nimport leftmenu from './components/leftmenu';\n\nclass Screen extends React.Component {\n\n    done_sound_play = () =>{\n        this.props.storage_reciept_set_done_sound(Sound.status.PLAYING) \n    }\n\n    err_sound_play = () =>{\n      this.props.storage_reciept_set_err_sound(Sound.status.PLAYING) \n    }\n\n    funk_sound_play = () =>{\n      this.props.storage_reciept_set_funk_sound(Sound.status.PLAYING) \n    }\n\n    send_req = () => {\n       \n        if (this.props.store.storage_reciept.barcode.substring(0, 9)===\"0000-0000\") {\n          let zone = this.props.store.storage_reciept.barcode.substring(10)\n          let find_zone = this.props.store.storage_reciept.zone_list.find(el=>el===zone)\n          console.log(find_zone)\n          if(find_zone === undefined){\n            this.props.storage_reciept_set_barcode('')\n            this.props.storage_reciept_set_status_type('err')\n            this.props.storage_reciept_set_status_message('Зона хранения не найдена')\n            this.err_sound_play()\n          } else {\n          this.props.storage_reciept_set_selected_zone(zone);\n          this.props.storage_reciept_set_barcode('')\n          this.props.storage_reciept_set_status_message('')\n          this.props.storage_reciept_set_status_type(null)\n          this.funk_sound_play()\n          }\n        } else {\n        this.props.modules.set_active_window(\"wait\");\n        \n        const data = {\n          userkey: this.props.store.login.userkey,\n          barcode: this.props.store.storage_reciept.barcode,\n          zone: this.props.store.storage_reciept.selected_zone,\n          storage: this.props.store.storage_reciept.storage.id\n        }\n        \n        get_data('storagereciept', data).then(\n          (result) => {\n            this.props.modules.set_active_window(\"storage_reciept\");\n            this.props.storage_reciept_set_result(result);\n            this.props.storage_reciept_set_barcode('')\n            if (result.status_type === 'ok') {\n              this.done_sound_play()\n            } else {\n              this.err_sound_play()\n            }\n          },\n          (err) => { \n            this.props.modules.set_active_window(\"storage_reciept\");\n            this.props.storage_reciept_set_result({\n              status_type: 'err',\n              status_message: err\n            })\n            this.err_sound_play()\n           }\n        );\n      }\n    }\n\n      render() {\n        let done_sound_status\n        if (this.props.store.storage_reciept.done_sound === undefined) {\n          done_sound_status = Sound.status.STOPPED\n        } else {\n          done_sound_status = this.props.store.storage_reciept.done_sound\n        }\n\n        let funk_sound_status\n        if (this.props.store.storage_reciept.funk_sound === undefined) {\n          funk_sound_status = Sound.status.STOPPED\n        } else {\n          funk_sound_status = this.props.store.storage_reciept.funk_sound\n        }\n\n        let err_sound_status\n        if (this.props.store.storage_reciept.err_sound === undefined) {\n          err_sound_status = Sound.status.STOPPED\n        } else {\n          err_sound_status = this.props.store.storage_reciept.err_sound\n        }\n\n        const send_req = this.send_req \n        document.onkeydown = function (event) {\n            \n            try {\n              if (event.keyCode === 13) {\n                send_req()\n              }\n            } catch (e) { \n                console.log(e)\n              }\n            };\n\n        return (\n          <div>\n            <div className='disp_map_button'><button className='ui button mini' onClick={()=>{\n                    this.props.set_full_screen()\n                }}>Полноэкранный режим</button></div>\n           <div>\n             Текущий склад: {this.props.store.storage_reciept.storage.name}\n           </div>\n           <div>\n            Зона хранения: {this.props.store.storage_reciept.selected_zone}\n           </div>\n          \n            <input autoFocus value={this.props.store.storage_reciept.barcode} onChange={(e)=>{this.props.storage_reciept_set_barcode(e.target.value)}} />\n           {this.props.store.storage_reciept.status_type === \"ok\" ? (\n             <div>\n                <div>Накладная: {this.props.store.storage_reciept.num} </div>\n                <div>Задача: {this.props.store.storage_reciept.task_type} </div>\n                <div>Дата: {this.props.store.storage_reciept.task_date}</div>\n                <div>Курьер: {this.props.store.storage_reciept.task_value}</div>\n                <div>Заказчик: {this.props.store.storage_reciept.customer}</div>\n                <div>Город: {this.props.store.storage_reciept.rec_city}</div>\n                <div>Адрес: {this.props.store.storage_reciept.rec_adress}</div>\n                <div>Район: {this.props.store.storage_reciept.rec_district}</div>\n                <div>Получатель: {this.props.store.storage_reciept.rec_name}</div>\n             </div>\n           ):(null)}\n           {this.props.store.storage_reciept.status_type === \"err\" ? (\n             <div>\n               {this.props.store.storage_reciept.status_message}\n             </div>\n           ):(null)}\n                <Sound url={done_sound} playStatus={done_sound_status} />\n                <Sound url={err_sound} playStatus={err_sound_status} />\n                <Sound url={funk_sound} playStatus={funk_sound_status} />\n          </div>\n        )\n      }\n}\n\nexport default connect(\n    state => ({\n        store: state\n    }),\n    dispatch => ({\n      storage_reciept_set_barcode: (param) => { dispatch({ type: 'storage_reciept_set_barcode', payload: param }) },\n      storage_reciept_set_result: (param) => { dispatch({ type: 'storage_reciept_set_result', payload: param }) },\n      storage_reciept_set_selected_zone: (param) => { dispatch({ type: 'storage_reciept_set_selected_zone', payload: param }) },\n      set_full_screen: () => { dispatch({ type: 'set_full_screen'}) },\n      storage_reciept_set_done_sound: (param) => { dispatch({ type: 'storage_reciept_set_done_sound', payload: param }) },\n      storage_reciept_set_err_sound: (param) => { dispatch({ type: 'storage_reciept_set_err_sound', payload: param }) },\n      storage_reciept_set_funk_sound: (param) => { dispatch({ type: 'storage_reciept_set_funk_sound', payload: param }) },\n      storage_reciept_set_status_message: (param) => { dispatch({ type: 'storage_reciept_set_status_message', payload: param }) },\n      storage_reciept_set_status_type: (param) => { dispatch({ type: 'storage_reciept_set_status_type', payload: param }) },\n    })\n)(Screen)\n\n"]},"metadata":{},"sourceType":"module"}