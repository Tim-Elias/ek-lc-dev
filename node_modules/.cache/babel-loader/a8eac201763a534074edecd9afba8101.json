{"ast":null,"code":"var _jsxFileName = \"/home/saint/ek 3.1/ek-lc-dev/src/m_screen/m_send_manifest.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport '../screen/send_manifest.css';\nimport '../App.css';\nimport { get_data } from './../common/common_modules';\nimport Wait from \"../screen/wait\";\nimport { Item } from 'semantic-ui-react';\n\nclass Screen extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.send_manifest = () => {\n      this.props.set_active_window(\"wait\");\n      const dispatches = this.props.store.storage.list.filter(el => {\n        if (el.selected) return el;\n      }).map(disp => {\n        return disp.Number;\n      });\n      const data = {\n        userkey: this.props.store.login.userkey,\n        dispatches: dispatches,\n        storehouse: this.props.store.send_manifest.storehouse\n      };\n      get_data('sendmanifest', data).then(result => {\n        get_data('list', {\n          userkey: this.props.store.login.userkey\n        }).then(result => {\n          this.props.set_list_storage(result);\n          this.props.set_active_window(\"Mmenu\");\n        }, err => {\n          this.props.set_active_window(\"Mmenu\");\n          console.log(err);\n        });\n      }, err => {\n        this.props.set_active_window(\"send_manifest\");\n        this.props.set_search_error(err);\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.props.set_active_loader(true);\n    const list_data = {\n      userkey: this.props.store.login.userkey\n    };\n    get_data('list', list_data).then(result => {\n      this.props.set_list_storage(result);\n      this.props.set_active_loader(false);\n    }, err => {\n      console.log(err);\n      this.props.set_active_loader(false);\n    });\n  }\n\n  render() {\n    const search = () => {\n      this.search();\n    };\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mobile_heading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }, \"\\u0424\\u043E\\u0440\\u043C\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0438\\u0441\\u0445\\u043E\\u0434\\u044F\\u0449\\u0435\\u0433\\u043E \\u043C\\u0430\\u043D\\u0438\\u0444\\u0435\\u0441\\u0442\\u0430\"), this.props.store.general.active_loader ? /*#__PURE__*/React.createElement(Wait, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 60\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mobile_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"mobile_select\",\n      value: this.props.store.send_manifest.storehouse,\n      onChange: e => this.props.set_send_manifest_storehouse(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"000000001\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 29\n      }\n    }, \"\\u041D\\u043E\\u0432\\u043E\\u0441\\u0438\\u0431\\u0438\\u0440\\u0441\\u043A, \\u041A\\u043E\\u043C\\u043C\\u0443\\u043D\\u0438\\u0441\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0430\\u044F 7\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"000000006\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 29\n      }\n    }, \"\\u041A\\u0440\\u0430\\u0441\\u043D\\u043E\\u044F\\u0440\\u0441\\u043A \\u041A\\u0430\\u0440\\u0430\\u0443\\u043B\\u044C\\u043D\\u0430\\u044F 4\\u0441\\u0442\\u04401\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"000000002\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 29\n      }\n    }, \"\\u041A\\u0435\\u043C\\u0435\\u0440\\u043E\\u0432\\u043E \\u0420\\u0443\\u043A\\u0430\\u0432\\u0438\\u0448\\u043D\\u0438\\u043A\\u043E\\u0432\\u0430 26\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"000000009\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 29\n      }\n    }, \"\\u0411\\u0430\\u0440\\u043D\\u0430\\u0443\\u043B, \\u041C\\u043E\\u043B\\u043E\\u0434\\u0435\\u0436\\u043D\\u0430\\u044F 111\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"000000008\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 29\n      }\n    }, \"\\u041E\\u043C\\u0441\\u043A, \\u041F\\u043E\\u0442\\u0430\\u043D\\u0438\\u043D\\u0430 15\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"000000007\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 29\n      }\n    }, \"\\u0422\\u043E\\u043C\\u0441\\u043A, \\u0413\\u0435\\u0440\\u0446\\u0435\\u043D\\u0430 13\\u0430\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"000000010\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 29\n      }\n    }, \"\\u041D\\u043E\\u0432\\u043E\\u043A\\u0443\\u0437\\u043D\\u0435\\u0446\\u043A, \\u0426\\u0438\\u043E\\u043B\\u043A\\u043E\\u0432\\u0441\\u043A\\u043E\\u0433\\u043E 13, \\u043E\\u0444 11\")), this.props.store.storage.list.filter(el => {\n      const filter_num = el.Number.toUpperCase();\n      const filter_adress = el.Adress.toUpperCase();\n      const text = this.props.store.storage.search.toUpperCase();\n      return text === \"\" || filter_num.indexOf(text) > -1 || filter_adress.indexOf(text) > -1;\n    }).filter(item => item.Type === \"Доставка\").map((disp, index) => /*#__PURE__*/React.createElement(\"div\", {\n      onClick: e => this.props.select_m_disp(disp.Number),\n      key: index,\n      className: \"mobile_storage_item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      className: \"mobile_storage_checkbox\",\n      checked: disp.selected,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: \"100%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mobile_storage_field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 37\n      }\n    }, disp.Customer), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mobile_storage_field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 37\n      }\n    }, disp.Date), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mobile_storage_field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 37\n      }\n    }, disp.Type, \" \", disp.Number), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mobile_storage_field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 37\n      }\n    }, disp.reccity, \" \", disp.Adress), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mobile_storage_field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 37\n      }\n    }, disp.Phone, \" \", disp.Person), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mobile_storage_field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 37\n      }\n    }, disp.AddInfo)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mobile_storage_item_row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mobile_storage_field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 37\n      }\n    }, disp.Status, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 88\n      }\n    }), disp.Time), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mobile_storage_field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 75\n      }\n    }, disp.COD, \" \\u0440\\u0443\\u0431.\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"disp_data_el\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 25\n      }\n    }, \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u0430 \\u0441\\u043A\\u043B\\u0430\\u0434: \\u043D\\u0430\\u043A\\u043B\\u0430\\u0434\\u043D\\u044B\\u0445: \", this.props.store.storage.list.filter(el => {\n      if (el.selected) return el;\n    }).length, \" (\\u043C\\u0435\\u0441\\u0442: \", this.props.store.storage.list.filter(el => {\n      if (el.selected) return el;\n    }).reduce((sum, el) => {\n      return sum + parseInt(el.total);\n    }, 0), \")\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.send_manifest.bind(this),\n      className: \"send_manifest\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 25\n      }\n    }, \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0438 \\u0437\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\")));\n  }\n\n}\n\n;\nexport default connect(state => ({\n  store: state\n}), dispatch => ({\n  select_m_disp: param => {\n    dispatch({\n      type: 'select_m_disp',\n      payload: param\n    });\n  },\n  set_active_loader: param => {\n    dispatch({\n      type: 'set_active_loader',\n      payload: param\n    });\n  },\n  set_active_window: param => {\n    dispatch({\n      type: 'set_active_window',\n      payload: param\n    });\n  },\n  set_send_manifest_storehouse: param => {\n    dispatch({\n      type: 'set_send_manifest_storehouse',\n      payload: param\n    });\n  },\n  set_search_send_manifest: param => {\n    dispatch({\n      type: 'set_search_send_manifest',\n      payload: param\n    });\n  },\n  set_search_send_manifest_error: param => {\n    dispatch({\n      type: 'set_search_error',\n      payload: param\n    });\n  },\n  select_disp: param => {\n    dispatch({\n      type: 'select_disp',\n      payload: param\n    });\n  },\n  set_list_storage: param => {\n    dispatch({\n      type: 'set_list_storage',\n      payload: param\n    });\n  }\n}))(Screen);","map":{"version":3,"sources":["/home/saint/ek 3.1/ek-lc-dev/src/m_screen/m_send_manifest.js"],"names":["React","connect","get_data","Wait","Item","Screen","Component","send_manifest","props","set_active_window","dispatches","store","storage","list","filter","el","selected","map","disp","Number","data","userkey","login","storehouse","then","result","set_list_storage","err","console","log","set_search_error","componentDidMount","set_active_loader","list_data","render","search","general","active_loader","e","set_send_manifest_storehouse","target","value","filter_num","toUpperCase","filter_adress","Adress","text","indexOf","item","Type","index","select_m_disp","width","Customer","Date","reccity","Phone","Person","AddInfo","Status","Time","COD","length","reduce","sum","parseInt","total","bind","state","dispatch","param","type","payload","set_search_send_manifest","set_search_send_manifest_error","select_disp"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport '../screen/send_manifest.css';\nimport '../App.css';\nimport { get_data } from './../common/common_modules';\nimport Wait from \"../screen/wait\";\nimport { Item } from 'semantic-ui-react';\n\nclass Screen extends React.Component {\n\n\n    componentDidMount() {\n\n        this.props.set_active_loader(true);\n\n        const list_data = { userkey: this.props.store.login.userkey };\n\n        get_data('list', list_data).then(\n            (result) => {\n                this.props.set_list_storage(result);\n                this.props.set_active_loader(false);\n            },\n            (err) => { \n                console.log(err);\n                this.props.set_active_loader(false);\n            }\n        );\n    }\n\n    send_manifest = () => {\n\n        this.props.set_active_window(\"wait\");\n\n        const dispatches = this.props.store.storage.list.filter((el) => { if (el.selected) return el }).map((disp) => { return disp.Number })\n        const data = {\n            userkey: this.props.store.login.userkey,\n            dispatches: dispatches,\n            storehouse: this.props.store.send_manifest.storehouse,\n        };\n\n        get_data('sendmanifest', data).then(\n            (result) => {\n\n                get_data('list', { userkey: this.props.store.login.userkey }).then(\n                    (result) => {\n                        this.props.set_list_storage(result);\n                        this.props.set_active_window(\"Mmenu\");\n                    },\n\n                    (err) => {\n                        this.props.set_active_window(\"Mmenu\");\n                        console.log(err)\n                    }\n                );\n            },\n            (err) => {\n                this.props.set_active_window(\"send_manifest\");\n                this.props.set_search_error(err)\n            }\n        );\n    }\n\n\n    render() {\n\n        const search = () => {\n            this.search();\n        };\n\n        return (\n            <div>\n                <div className=\"mobile_heading\">Формирование исходящего манифеста</div>\n                {this.props.store.general.active_loader ? (<Wait />) : (\n                    <div className=\"mobile_container\">\n                        <select className=\"mobile_select\" value={this.props.store.send_manifest.storehouse} onChange={e => this.props.set_send_manifest_storehouse(e.target.value)}>\n                            <option value=\"000000001\">Новосибирск, Коммунистическая 7</option>\n                            <option value=\"000000006\">Красноярск Караульная 4стр1</option>\n                            <option value=\"000000002\">Кемерово Рукавишникова 26</option>\n                            <option value=\"000000009\">Барнаул, Молодежная 111</option>\n                            <option value=\"000000008\">Омск, Потанина 15</option>\n                            <option value=\"000000007\">Томск, Герцена 13а</option>\n                            <option value=\"000000010\">Новокузнецк, Циолковского 13, оф 11</option>\n                        </select>\n\n                        {this.props.store.storage.list.filter((el) => {\n                            const filter_num = el.Number.toUpperCase()\n                            const filter_adress = el.Adress.toUpperCase()\n                            const text = this.props.store.storage.search.toUpperCase()\n                            return text === \"\" || filter_num.indexOf(text) > -1 || filter_adress.indexOf(text) > -1\n                        }).filter((item) => (item.Type === \"Доставка\")).map((disp, index) =>\n                            <div onClick={e => this.props.select_m_disp(disp.Number)} key={index}\n                                className=\"mobile_storage_item\">\n                                <input type=\"checkbox\" className=\"mobile_storage_checkbox\" checked={disp.selected} />\n                                <div style={{width: \"100%\"}}>\n                                    <div className=\"mobile_storage_field\">{disp.Customer}</div>\n                                    <div className=\"mobile_storage_field\">{disp.Date}</div>\n                                    <div className=\"mobile_storage_field\">{disp.Type} {disp.Number}</div>\n                                    <div className=\"mobile_storage_field\">{disp.reccity} {disp.Adress}</div>\n                                    <div className=\"mobile_storage_field\">{disp.Phone} {disp.Person}</div>\n                                    <div className=\"mobile_storage_field\">{disp.AddInfo}</div>\n                                </div>\n                                <div className=\"mobile_storage_item_row\">\n                                    <div className=\"mobile_storage_field\">{disp.Status}<br />{disp.Time}</div>\n\n                                    <div className=\"mobile_storage_field\"><b>{disp.COD} руб.</b></div>\n                                </div>\n                            </div>\n\n                        )}\n\n                        <div className=\"disp_data_el\">Отправить на склад: накладных: {this.props.store.storage.list.filter((el) => { if (el.selected) return el }).length} (мест: {this.props.store.storage.list.filter((el) => { if (el.selected) return el }).reduce((sum, el) => { return sum + parseInt(el.total) }, 0)})</div>\n                        <button onClick={this.send_manifest.bind(this)} className=\"send_manifest\">Отправить и закрыть</button>\n\n                    </div>\n                )}\n                \n            </div>\n        );\n    }\n};\n\nexport default connect(\n    state => ({\n        store: state\n    }),\n    dispatch => ({\n        select_m_disp: (param) => { dispatch({ type: 'select_m_disp', payload: param }) },\n        set_active_loader: (param) => { dispatch({ type: 'set_active_loader', payload: param }) },\n        set_active_window: (param) => { dispatch({ type: 'set_active_window', payload: param }) },\n        set_send_manifest_storehouse: (param) => { dispatch({ type: 'set_send_manifest_storehouse', payload: param }) },\n        set_search_send_manifest: (param) => { dispatch({ type: 'set_search_send_manifest', payload: param }) },\n        set_search_send_manifest_error: (param) => { dispatch({ type: 'set_search_error', payload: param }) },\n        select_disp: (param) => { dispatch({ type: 'select_disp', payload: param }) },\n        set_list_storage: (param) => { dispatch({ type: 'set_list_storage', payload: param }) },\n    })\n)(Screen);"]},"metadata":{},"sourceType":"module"}