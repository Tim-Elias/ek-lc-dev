{"ast":null,"code":"var _jsxFileName = \"/home/saint/123/ek-lc-dev/src/screen/storage.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Header, Modal, Table, Button } from 'semantic-ui-react';\nimport { get_data } from './../common/common_modules';\n\nclass Screen extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.update = () => {\n      this.props.set_active_window(\"wait\");\n      const list_data = {\n        userkey: this.props.store.login.userkey\n      };\n      get_data('list', list_data).then(result => {\n        this.props.set_list_storage(result);\n        this.props.set_active_window(\"storage\");\n      }, err => {\n        console.log(err);\n      });\n    };\n\n    this.tr_double_click = async disp => {\n      this.props.set_active_window(\"wait\");\n      const data = {\n        userkey: this.props.store.login.userkey,\n        status: disp.Type,\n        num: disp.Number\n      };\n      get_data('dispatch', data).then(result => {\n        console.log(result);\n        this.props.set_data_disp(result);\n        this.props.set_active_window(\"disp\");\n        this.props.set_last_window(\"storage\");\n        this.props.set_action(\"deliver\");\n      }, err => {\n        console.log(err);\n      });\n    };\n\n    this.datefrom = React.createRef();\n    this.dateto = React.createRef();\n  }\n\n  handleButtonPress() {\n    this.buttonPressTimer = setTimeout(() => alert('long press activated'), 1500);\n  }\n\n  handleButtonRelease() {\n    clearTimeout(this.buttonPressTimer);\n  }\n\n  tr_click(num) {\n    console.log('num is ', num);\n    this.props.set_active_storage(num);\n  }\n\n  render() {\n    document.onkeydown = function (event) {};\n\n    const tr_click = name => {\n      this.tr_click(name);\n    };\n\n    const tr_double_click = disp => {\n      this.tr_double_click(disp);\n    };\n\n    document.onkeydown = function (event) {\n      try {\n        if (event.keyCode === 38) {\n          event.preventDefault();\n          console.log(\"Вверх\");\n          let currentId = parseInt(document.getElementsByClassName('active')[0].getAttribute(\"id\"));\n          let updisp = document.getElementById((currentId - 1).toString());\n\n          if (updisp !== null) {\n            tr_click(updisp.getAttribute(\"name\"));\n          }\n        }\n\n        if (event.keyCode === 40) {\n          event.preventDefault();\n          console.log(\"Вниз\");\n          let currentId = parseInt(document.getElementsByClassName('active')[0].getAttribute(\"id\"));\n          let updisp = document.getElementById((currentId + 1).toString());\n\n          if (updisp !== null) {\n            tr_click(updisp.getAttribute(\"name\"));\n          }\n        }\n\n        if (event.keyCode === 13) {\n          const num = document.getElementsByClassName('active')[0].getAttribute(\"name\");\n          const status = document.getElementsByClassName('active')[0].getAttribute(\"status\");\n          console.log(\"Enter\");\n          tr_double_click({\n            Number: num,\n            Type: status\n          });\n        }\n      } catch (e) {}\n    };\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"\\u041D\\u0430\\u043A\\u043B\\u0430\\u0434\\u043D\\u044B\\u0435 \\u043D\\u0430 \\u0441\\u043A\\u043B\\u0430\\u0434\\u0435\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, this.props.store.storage.active !== null ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.update.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\")) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.update.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\")), React.createElement(\"div\", {\n      className: \"search_storage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"disp_data_label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u043D\\u043E\\u043C\\u0435\\u0440\\u0443\"), React.createElement(\"div\", {\n      className: \"disp_data_input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"pod_input\",\n      value: this.props.store.storage.search,\n      onChange: e => this.props.set_search_storagre(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }))), this.props.store.storage.list.length !== 0 ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(Table, {\n      celled: true,\n      size: \"small\",\n      compact: \"very\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(Table.Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(Table.Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(Table.HeaderCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"\\u0414\\u0430\\u0442\\u0430\"), React.createElement(Table.HeaderCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"\\u0422\\u0438\\u043F\"), React.createElement(Table.HeaderCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"\\u0417\\u0430\\u043A\\u0430\\u0437\\u0447\\u0438\\u043A\"), React.createElement(Table.HeaderCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u043D\\u0430\\u043A\\u043B\\u0430\\u0434\\u043D\\u043E\\u0439\"), React.createElement(Table.HeaderCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"\\u0410\\u0434\\u0440\\u0435\\u0441\"), React.createElement(Table.HeaderCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"), React.createElement(Table.HeaderCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u043D\\u043E\\u0435 \\u043B\\u0438\\u0446\\u043E\"), React.createElement(Table.HeaderCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"\\u041A \\u043E\\u043F\\u043B\\u0430\\u0442\\u0435\"), React.createElement(Table.HeaderCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043C\\u0435\\u0441\\u0442\"), React.createElement(Table.HeaderCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"\\u0412\\u0435\\u0441\"))), this.props.store.storage.list.filter(el => this.props.store.storage.search === \"\" || el.Number.indexOf(this.props.store.storage.search) !== -1).map((disp, index) => React.createElement(Table.Body, {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, disp.Number === this.props.store.storage.active ? React.createElement(Table.Row, {\n      className: \"active\",\n      id: index,\n      name: disp.Number,\n      status: disp.Type,\n      onKeyDown: console.log('Key down'),\n      onClick: this.tr_click.bind(this, disp.Number),\n      onTouchStart: this.handleButtonPress.bind(this),\n      onTouchEnd: this.handleButtonRelease.bind(this),\n      onDoubleClick: this.tr_double_click.bind(this, disp),\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, disp.Date), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, disp.Type), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, disp.Customer), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, disp.Number), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, disp.Adress), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, disp.Phone), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, disp.Person), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, disp.COD), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, disp.total), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, disp.weight)) : React.createElement(Table.Row, {\n      onClick: this.tr_click.bind(this, disp.Number),\n      id: index,\n      name: disp.Number,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, disp.Date), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, disp.Type), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, disp.Customer), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, disp.Number), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, disp.Adress), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, disp.Phone), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, disp.Person), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, disp.COD), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, disp.total), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, disp.weight)))))) : ''));\n  }\n\n}\n\n;\nexport default connect(state => ({\n  store: state\n}), dispatch => ({\n  set_search_storagre: param => {\n    dispatch({\n      type: 'set_search_storagre',\n      payload: param\n    });\n  },\n  set_data_disp: param => {\n    dispatch({\n      type: 'set_data_disp',\n      payload: param\n    });\n  },\n  set_last_window: () => {\n    dispatch({\n      type: 'set_last_window',\n      payload: \"storage\"\n    });\n  },\n  set_active_window: param => {\n    dispatch({\n      type: 'set_active_window',\n      payload: param\n    });\n  },\n  set_list_storage: param => {\n    dispatch({\n      type: 'set_list_storage',\n      payload: param\n    });\n  },\n  set_active_storage: param => {\n    dispatch({\n      type: 'set_active_storage',\n      payload: param\n    });\n  },\n  set_action: param => {\n    dispatch({\n      type: 'set_action',\n      payload: param\n    });\n  }\n}))(Screen);","map":{"version":3,"sources":["/home/saint/123/ek-lc-dev/src/screen/storage.js"],"names":["React","connect","Header","Modal","Table","Button","get_data","Screen","Component","constructor","props","update","set_active_window","list_data","userkey","store","login","then","result","set_list_storage","err","console","log","tr_double_click","disp","data","status","Type","num","Number","set_data_disp","set_last_window","set_action","datefrom","createRef","dateto","handleButtonPress","buttonPressTimer","setTimeout","alert","handleButtonRelease","clearTimeout","tr_click","set_active_storage","render","document","onkeydown","event","name","keyCode","preventDefault","currentId","parseInt","getElementsByClassName","getAttribute","updisp","getElementById","toString","e","storage","active","bind","search","set_search_storagre","target","value","list","length","filter","el","indexOf","map","index","Date","Customer","Adress","Phone","Person","COD","total","weight","state","dispatch","param","type","payload"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { Header, Modal, Table, Button } from 'semantic-ui-react'\nimport { get_data } from './../common/common_modules'\n\n\nclass Screen extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.datefrom = React.createRef();\n    this.dateto = React.createRef();\n  }\n\n  handleButtonPress () {\n    this.buttonPressTimer = setTimeout(() => alert('long press activated'), 1500);\n  }\n\n  handleButtonRelease () {\n    clearTimeout(this.buttonPressTimer);\n  }\n\n  update = () => {\n    this.props.set_active_window(\"wait\");\n    const list_data = { userkey: this.props.store.login.userkey };\n\n    get_data('list', list_data).then(\n      (result) => {\n        this.props.set_list_storage(result);\n        this.props.set_active_window(\"storage\");\n      },\n      (err) => { console.log(err) }\n    );\n\n  };\n\n\n  tr_click(num) {\n    console.log('num is ', num);\n    this.props.set_active_storage(num);\n  };\n\n  tr_double_click = async (disp) => {\n    this.props.set_active_window(\"wait\");\n\n    const data = {\n      userkey: this.props.store.login.userkey,\n      status: disp.Type,\n      num: disp.Number\n    };\n\n    get_data('dispatch', data).then(\n      (result) => {\n        console.log(result)\n        this.props.set_data_disp(result);\n        this.props.set_active_window(\"disp\");\n        this.props.set_last_window(\"storage\");\n        this.props.set_action(\"deliver\");\n      },\n      (err) => { console.log(err) }\n    );\n\n\n  };\n\n  render() {\n\n    document.onkeydown = function (event) {}\n    \n    const tr_click = (name) => {\n      this.tr_click(name);\n    };\n\n    const tr_double_click = (disp) => {\n      this.tr_double_click(disp);\n    };\n\n    document.onkeydown = function (event) {\n      try {\n        if (event.keyCode === 38) {\n          event.preventDefault();\n          console.log(\"Вверх\")\n          let currentId = parseInt(document.getElementsByClassName('active')[0].getAttribute(\"id\"));\n          let updisp = document.getElementById((currentId - 1).toString());\n          if (updisp !== null) { tr_click(updisp.getAttribute(\"name\")); }\n        }\n        if (event.keyCode === 40) {\n          event.preventDefault();\n          console.log(\"Вниз\")\n          let currentId = parseInt(document.getElementsByClassName('active')[0].getAttribute(\"id\"));\n          let updisp = document.getElementById((currentId + 1).toString());\n          if (updisp !== null) { tr_click(updisp.getAttribute(\"name\")); }\n        }\n        if (event.keyCode === 13) {\n          const num = document.getElementsByClassName('active')[0].getAttribute(\"name\");\n          const status = document.getElementsByClassName('active')[0].getAttribute(\"status\");\n          console.log(\"Enter\")\n          tr_double_click({ Number: num, Type: status });\n        }\n\n      } catch (e) { }\n    };\n\n    return (\n      <div>\n        <div>\n\n          <h3>Накладные на складе</h3>\n\n        </div>\n        <div>\n          {this.props.store.storage.active !== null ? (<div>\n            <button onClick={this.update.bind(this)} >Обновить данные</button>\n            {/* <button >Скопировать</button>\n                      <button >Печать</button> */}\n          </div>) : (<div>\n            <button onClick={this.update.bind(this)} >Обновить данные</button>\n            {/* <button disabled >Скопировать</button>\n                      <button disabled >Печать</button> */}\n          </div>)}\n          <div className=\"search_storage\">\n          <div className=\"disp_data_label\">Поиск по номеру</div>\n          <div className=\"disp_data_input\"><input className=\"pod_input\" value={this.props.store.storage.search} onChange={e => this.props.set_search_storagre(e.target.value)}></input></div>\n          </div>\n          {this.props.store.storage.list.length !== 0 ? (\n            <div>\n\n<Table celled size='small' compact='very'>\n\n<Table.Header>\n<Table.Row>\n<Table.HeaderCell>Дата</Table.HeaderCell>\n<Table.HeaderCell>Тип</Table.HeaderCell>\n<Table.HeaderCell>Заказчик</Table.HeaderCell>\n<Table.HeaderCell>Номер накладной</Table.HeaderCell>\n<Table.HeaderCell>Адрес</Table.HeaderCell>\n<Table.HeaderCell>Телефон</Table.HeaderCell>\n<Table.HeaderCell>Контактное лицо</Table.HeaderCell>\n<Table.HeaderCell>К оплате</Table.HeaderCell>\n<Table.HeaderCell>Количество мест</Table.HeaderCell>\n<Table.HeaderCell>Вес</Table.HeaderCell>\n\n                  </Table.Row>\n                </Table.Header>\n\n                {this.props.store.storage.list.filter((el)=>this.props.store.storage.search === \"\" || el.Number.indexOf(this.props.store.storage.search) !== -1).map((disp, index) =>\n                  <Table.Body key={index}>\n\n                    {disp.Number === this.props.store.storage.active ? (\n                      <Table.Row className='active' id={index} name={disp.Number} status={disp.Type} onKeyDown={console.log('Key down')} \n                      onClick={this.tr_click.bind(this, disp.Number)} \n                      onTouchStart={this.handleButtonPress.bind(this)} \n                      onTouchEnd={this.handleButtonRelease.bind(this)} \n                      onDoubleClick={this.tr_double_click.bind(this, disp)} key={index} >\n\n                        <Table.Cell>{disp.Date}</Table.Cell>\n                        <Table.Cell>{disp.Type}</Table.Cell>\n                        <Table.Cell>{disp.Customer}</Table.Cell>\n                        <Table.Cell>{disp.Number}</Table.Cell>\n                        <Table.Cell>{disp.Adress}</Table.Cell>\n                        <Table.Cell>{disp.Phone}</Table.Cell>\n                        <Table.Cell>{disp.Person}</Table.Cell>\n                        <Table.Cell>{disp.COD}</Table.Cell>\n                        <Table.Cell>{disp.total}</Table.Cell>\n                        <Table.Cell>{disp.weight}</Table.Cell>\n\n\n                      </Table.Row>) : (<Table.Row onClick={this.tr_click.bind(this, disp.Number)} id={index} name={disp.Number} key={index} >\n                        <Table.Cell>{disp.Date}</Table.Cell>\n                        <Table.Cell>{disp.Type}</Table.Cell>\n                        <Table.Cell>{disp.Customer}</Table.Cell>\n                        <Table.Cell>{disp.Number}</Table.Cell>\n                        <Table.Cell>{disp.Adress}</Table.Cell>\n                        <Table.Cell>{disp.Phone}</Table.Cell>\n                        <Table.Cell>{disp.Person}</Table.Cell>\n                        <Table.Cell>{disp.COD}</Table.Cell>\n                        <Table.Cell>{disp.total}</Table.Cell>\n                        <Table.Cell>{disp.weight}</Table.Cell>\n\n                      </Table.Row>)}\n                  </Table.Body>\n\n                )}\n\n              </Table>\n            </div>) : ('')}\n        </div>\n      </div>\n    );\n  }\n};\n\nexport default connect(\n  state => ({\n    store: state\n  }),\n  dispatch => ({\n    set_search_storagre: (param) => { dispatch({ type: 'set_search_storagre', payload: param }) },\n    set_data_disp: (param) => { dispatch({ type: 'set_data_disp', payload: param }) },\n    set_last_window: () => { dispatch({ type: 'set_last_window', payload: \"storage\" }) },\n    set_active_window: (param) => { dispatch({ type: 'set_active_window', payload: param }) },\n    set_list_storage: (param) => { dispatch({ type: 'set_list_storage', payload: param }) },\n    set_active_storage: (param) => { dispatch({ type: 'set_active_storage', payload: param }) },\n    set_action: (param) => { dispatch({ type: 'set_action', payload: param }) },\n  })\n)(Screen);\n"]},"metadata":{},"sourceType":"module"}