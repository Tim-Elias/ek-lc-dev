{"ast":null,"code":"var _jsxFileName = \"/Users/elias/Documents/kinetika/src/screen/send_manifest.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport './send_manifest.css';\nimport { get_data } from './../common/common_modules';\n\nclass Screen extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.search = () => {\n      this.props.set_search_send_manifest_error(\"\");\n      const num = this.props.store.send_manifest.search;\n\n      if (this.props.store.storage.list.filter(el => {\n        if (el.selected && el.Number === num) {\n          return el;\n        }\n      }).length === 1) {\n        this.props.set_search_send_manifest_error(`Накладная ${num} уже добавлена`);\n      } else if (this.props.store.storage.list.filter(el => {\n        if (!el.selected && el.Number === num) {\n          return el;\n        }\n      }).length === 1) {\n        this.props.select_disp(num);\n      } else if (this.props.store.storage.list.filter(el => {\n        if (!el.selected && el.Number === num) {\n          return el;\n        }\n      }).length === 0) {\n        this.props.set_search_send_manifest_error(`Накладная ${num} не найдена`);\n      }\n    };\n\n    this.send_manifest = () => {\n      this.props.set_active_window(\"wait\");\n      const dispatches = this.props.store.storage.list.filter(el => {\n        if (el.selected) return el;\n      }).map(disp => {\n        return disp.Number;\n      });\n      const data = {\n        userkey: this.props.store.login.userkey,\n        dispatches: dispatches,\n        storehouse: this.props.store.send_manifest.storehouse\n      };\n      get_data('sendmanifest', data).then(result => {\n        get_data('list', {\n          userkey: this.props.store.login.userkey\n        }).then(result => {\n          this.props.set_list_storage(result);\n          this.props.set_active_window(\"storage\");\n        }, err => {\n          this.props.set_active_window(\"storage\");\n          console.log(err);\n        });\n      }, err => {\n        this.props.set_active_window(\"send_manifest\");\n        this.props.set_search_error(err);\n      });\n    };\n  }\n\n  render() {\n    const search = () => {\n      this.search();\n    };\n\n    document.onkeydown = function (event) {\n      try {\n        if (event.keyCode === 13) {\n          search();\n        }\n      } catch (e) {}\n    };\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"\\u0424\\u043E\\u0440\\u043C\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0438\\u0441\\u0445\\u043E\\u0434\\u044F\\u0449\\u0435\\u0433\\u043E \\u043C\\u0430\\u043D\\u0438\\u0444\\u0435\\u0441\\u0442\\u0430\"), React.createElement(\"select\", {\n      value: this.props.store.send_manifest.storehouse,\n      onChange: e => this.props.set_send_manifest_storehouse(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"000000001\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"\\u041D\\u043E\\u0432\\u043E\\u0441\\u0438\\u0431\\u0438\\u0440\\u0441\\u043A, \\u041A\\u043E\\u043C\\u043C\\u0443\\u043D\\u0438\\u0441\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0430\\u044F 7\"), React.createElement(\"option\", {\n      value: \"000000006\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"\\u041A\\u0440\\u0430\\u0441\\u043D\\u043E\\u044F\\u0440\\u0441\\u043A \\u041A\\u0430\\u0440\\u0430\\u0443\\u043B\\u044C\\u043D\\u0430\\u044F 4\\u0441\\u0442\\u04401\"), React.createElement(\"option\", {\n      value: \"000000002\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"\\u041A\\u0435\\u043C\\u0435\\u0440\\u043E\\u0432\\u043E \\u0420\\u0443\\u043A\\u0430\\u0432\\u0438\\u0448\\u043D\\u0438\\u043A\\u043E\\u0432\\u0430 26\"), React.createElement(\"option\", {\n      value: \"000000009\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"\\u0411\\u0430\\u0440\\u043D\\u0430\\u0443\\u043B, \\u041C\\u043E\\u043B\\u043E\\u0434\\u0435\\u0436\\u043D\\u0430\\u044F 111\"), React.createElement(\"option\", {\n      value: \"000000008\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"\\u041E\\u043C\\u0441\\u043A, \\u041F\\u043E\\u0442\\u0430\\u043D\\u0438\\u043D\\u0430 15\"), React.createElement(\"option\", {\n      value: \"000000007\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"\\u0422\\u043E\\u043C\\u0441\\u043A, \\u0413\\u0435\\u0440\\u0446\\u0435\\u043D\\u0430 13\\u0430\")), React.createElement(\"div\", {\n      className: \"search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"search_label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u043E\\u043C\\u0435\\u0440\"), React.createElement(\"div\", {\n      className: \"search_data\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      value: this.props.store.send_manifest.search,\n      className: \"search_data_input\",\n      onChange: e => this.props.set_search_send_manifest(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"search_button_area\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      id: \"search_button\",\n      onClick: this.search.bind(this),\n      className: \"send_pod\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"))), React.createElement(\"div\", {\n      className: \"search_error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, this.props.store.reciept.error), this.props.store.storage.list.filter(el => {\n      if (el.selected) return el;\n    }).length !== 0 ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"\\u0414\\u0430\\u0442\\u0430\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"\\u0422\\u0438\\u043F\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"\\u0417\\u0430\\u043A\\u0430\\u0437\\u0447\\u0438\\u043A\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u043D\\u0430\\u043A\\u043B\\u0430\\u0434\\u043D\\u043E\\u0439\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"\\u0410\\u0434\\u0440\\u0435\\u0441\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u043D\\u043E\\u0435 \\u043B\\u0438\\u0446\\u043E\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"\\u041A \\u043E\\u043F\\u043B\\u0430\\u0442\\u0435\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043C\\u0435\\u0441\\u0442\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"\\u0412\\u0435\\u0441\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, this.props.store.storage.list.filter(el => {\n      if (el.selected) return el;\n    }).map((disp, index) => React.createElement(\"tr\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, disp.Date), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, disp.Type), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, disp.Customer), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, disp.Number), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, disp.Adress), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, disp.Phone), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, disp.Person), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, disp.COD), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, disp.total), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, disp.weight)))))) : '', React.createElement(\"div\", {\n      className: \"disp_data_el\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u0430 \\u0441\\u043A\\u043B\\u0430\\u0434: \\u043D\\u0430\\u043A\\u043B\\u0430\\u0434\\u043D\\u044B\\u0445: \", this.props.store.storage.list.filter(el => {\n      if (el.selected) return el;\n    }).length, \" (\\u043C\\u0435\\u0441\\u0442: \", this.props.store.storage.list.filter(el => {\n      if (el.selected) return el;\n    }).reduce((sum, el) => {\n      return sum + parseInt(el.total);\n    }, 0), \")\"), React.createElement(\"button\", {\n      onClick: this.send_manifest.bind(this),\n      className: \"send_manifest\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0438 \\u0437\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"));\n  }\n\n}\n\n;\nexport default connect(state => ({\n  store: state\n}), dispatch => ({\n  set_active_window: param => {\n    dispatch({\n      type: 'set_active_window',\n      payload: param\n    });\n  },\n  set_send_manifest_storehouse: param => {\n    dispatch({\n      type: 'set_send_manifest_storehouse',\n      payload: param\n    });\n  },\n  set_search_send_manifest: param => {\n    dispatch({\n      type: 'set_search_send_manifest',\n      payload: param\n    });\n  },\n  set_search_send_manifest_error: param => {\n    dispatch({\n      type: 'set_search_error',\n      payload: param\n    });\n  },\n  select_disp: param => {\n    dispatch({\n      type: 'select_disp',\n      payload: param\n    });\n  },\n  set_list_storage: param => {\n    dispatch({\n      type: 'set_list_storage',\n      payload: param\n    });\n  }\n}))(Screen);","map":{"version":3,"sources":["/Users/elias/Documents/kinetika/src/screen/send_manifest.js"],"names":["React","connect","get_data","Screen","Component","search","props","set_search_send_manifest_error","num","store","send_manifest","storage","list","filter","el","selected","Number","length","select_disp","set_active_window","dispatches","map","disp","data","userkey","login","storehouse","then","result","set_list_storage","err","console","log","set_search_error","render","document","onkeydown","event","keyCode","e","set_send_manifest_storehouse","target","value","set_search_send_manifest","bind","reciept","error","index","Date","Type","Customer","Adress","Phone","Person","COD","total","weight","reduce","sum","parseInt","state","dispatch","param","type","payload"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport './send_manifest.css'\n\nimport { get_data } from './../common/common_modules'\n\n\nclass Screen extends React.Component {\n\n  search = () => {\n    this.props.set_search_send_manifest_error(\"\")\n    const num = this.props.store.send_manifest.search\n    if (this.props.store.storage.list.filter((el) => { if (el.selected && el.Number === num) { return (el) } }).length === 1) {\n      this.props.set_search_send_manifest_error(`Накладная ${num} уже добавлена`)\n    }\n\n    else if (this.props.store.storage.list.filter((el) => { if (!el.selected && el.Number === num) { return (el) } }).length === 1) {\n      this.props.select_disp(num)\n    }\n\n    else if (this.props.store.storage.list.filter((el) => { if (!el.selected && el.Number === num) { return (el) } }).length === 0) {\n      this.props.set_search_send_manifest_error(`Накладная ${num} не найдена`)\n    }\n\n  }\n\n  send_manifest = () => {\n\n    this.props.set_active_window(\"wait\");\n\n    const dispatches = this.props.store.storage.list.filter((el) => { if (el.selected) return el }).map((disp) => { return disp.Number })\n    const data = {\n      userkey: this.props.store.login.userkey,\n      dispatches: dispatches,\n      storehouse: this.props.store.send_manifest.storehouse,\n    };\n\n    get_data('sendmanifest', data).then(\n      (result) => {\n        \n        get_data('list', { userkey: this.props.store.login.userkey }).then(\n          (result) => {\n            this.props.set_list_storage(result);\n            this.props.set_active_window(\"storage\");\n          },\n\n          (err) => {\n            this.props.set_active_window(\"storage\");\n            console.log(err)\n          }\n        );\n      },\n      (err) => {\n        this.props.set_active_window(\"send_manifest\");\n        this.props.set_search_error(err)\n      }\n    );\n\n\n\n  }\n\n\n  render() {\n\n    const search = () => {\n      this.search();\n    };\n\n    document.onkeydown = function (event) {\n      try {\n\n        if (event.keyCode === 13) {\n          search()\n        }\n\n      } catch (e) { }\n    };\n\n    return (\n\n      <div>\n\n        <h3>Формирование исходящего манифеста</h3>\n\n        <select value={this.props.store.send_manifest.storehouse} onChange={e => this.props.set_send_manifest_storehouse(e.target.value)}>\n          <option value=\"000000001\">Новосибирск, Коммунистическая 7</option>\n          <option value=\"000000006\">Красноярск Караульная 4стр1</option>\n          <option value=\"000000002\">Кемерово Рукавишникова 26</option>\n          <option value=\"000000009\">Барнаул, Молодежная 111</option>\n          <option value=\"000000008\">Омск, Потанина 15</option>\n          <option value=\"000000007\">Томск, Герцена 13а</option>\n        </select>\n\n        <div className=\"search\">\n          <div className=\"search_label\">Введите номер</div>\n          <div className=\"search_data\"><input value={this.props.store.send_manifest.search} className=\"search_data_input\" onChange={e => this.props.set_search_send_manifest(e.target.value)}></input></div>\n          <div className=\"search_button_area\">\n            <button id=\"search_button\" onClick={this.search.bind(this)} className=\"send_pod\">Добавить</button>\n          </div>\n        </div>\n        <div className=\"search_error\">{this.props.store.reciept.error}</div>\n\n        {this.props.store.storage.list.filter((el) => { if (el.selected) return el }).length !== 0 ? (\n          <div>\n\n            <table>\n\n              <thead>\n                <tr >\n                  <th>Дата</th>\n                  <th>Тип</th>\n                  <th>Заказчик</th>\n                  <th>Номер накладной</th>\n                  <th>Адрес</th>\n                  <th>Телефон</th>\n                  <th>Контактное лицо</th>\n                  <th>К оплате</th>\n                  <th>Количество мест</th>\n                  <th>Вес</th>\n\n                </tr>\n              </thead>\n              <tbody>\n                {this.props.store.storage.list.filter((el) => { if (el.selected) return el }).map((disp, index) =>\n\n                  <tr key={index} >\n                    <td>{disp.Date}</td>\n                    <td>{disp.Type}</td>\n                    <td>{disp.Customer}</td>\n                    <td>{disp.Number}</td>\n                    <td>{disp.Adress}</td>\n                    <td>{disp.Phone}</td>\n                    <td>{disp.Person}</td>\n                    <td>{disp.COD}</td>\n                    <td>{disp.total}</td>\n                    <td>{disp.weight}</td>\n\n                  </tr>)}\n              </tbody>\n            </table>\n          </div>) : ('')}\n\n        <div className=\"disp_data_el\">Отправить на склад: накладных: {this.props.store.storage.list.filter((el) => { if (el.selected) return el }).length} (мест: {this.props.store.storage.list.filter((el) => { if (el.selected) return el }).reduce((sum, el) => { return sum + parseInt(el.total) }, 0)})</div>\n        <button onClick={this.send_manifest.bind(this)} className=\"send_manifest\">Отправить и закрыть</button>\n\n      </div>\n\n    );\n  }\n};\n\nexport default connect(\n  state => ({\n    store: state\n  }),\n  dispatch => ({\n    set_active_window: (param) => { dispatch({ type: 'set_active_window', payload: param }) },\n    set_send_manifest_storehouse: (param) => { dispatch({ type: 'set_send_manifest_storehouse', payload: param }) },\n    set_search_send_manifest: (param) => { dispatch({ type: 'set_search_send_manifest', payload: param }) },\n    set_search_send_manifest_error: (param) => { dispatch({ type: 'set_search_error', payload: param }) },\n    select_disp: (param) => { dispatch({ type: 'select_disp', payload: param }) },\n    set_list_storage: (param) => { dispatch({ type: 'set_list_storage', payload: param }) },\n  })\n)(Screen);"]},"metadata":{},"sourceType":"module"}