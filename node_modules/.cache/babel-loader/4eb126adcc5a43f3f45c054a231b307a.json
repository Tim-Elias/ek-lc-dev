{"ast":null,"code":"var _jsxFileName = \"/Users/elias/Documents/kinetika/src/screen/storage.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { get_data } from './../common/common_modules';\n\nclass Screen extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.update = () => {\n      this.props.set_active_window(\"wait\");\n      const list_data = {\n        userkey: this.props.store.login.userkey\n      };\n      get_data('list', list_data).then(result => {\n        this.props.set_list_storage(result);\n        this.props.set_active_window(\"storage\");\n      }, err => {\n        console.log(err);\n      });\n    };\n\n    this.tr_double_click = async disp => {\n      this.props.set_active_window(\"wait\");\n      const data = {\n        userkey: this.props.store.login.userkey,\n        status: disp.Type,\n        num: disp.Number\n      };\n      get_data('dispatch', data).then(result => {\n        console.log(result);\n        this.props.set_data_disp(result);\n        this.props.set_active_window(\"disp\");\n        this.props.set_last_window(\"storage\");\n        this.props.set_action(\"deliver\");\n      }, err => {\n        console.log(err);\n      });\n    };\n\n    this.datefrom = React.createRef();\n    this.dateto = React.createRef();\n  }\n\n  handleButtonPress() {\n    this.buttonPressTimer = setTimeout(() => alert('long press activated'), 1500);\n  }\n\n  handleButtonRelease() {\n    clearTimeout(this.buttonPressTimer);\n  }\n\n  tr_click(num) {\n    console.log('num is ', num);\n    this.props.set_active_storage(num);\n  }\n\n  render() {\n    const tr_click = name => {\n      this.tr_click(name);\n    };\n\n    const tr_double_click = disp => {\n      this.tr_double_click(disp);\n    };\n\n    document.onkeydown = function (event) {\n      try {\n        if (event.keyCode === 38) {\n          event.preventDefault();\n          console.log(\"Вверх\");\n          let currentId = parseInt(document.getElementsByClassName('active')[0].getAttribute(\"id\"));\n          let updisp = document.getElementById((currentId - 1).toString());\n\n          if (updisp !== null) {\n            tr_click(updisp.getAttribute(\"name\"));\n          }\n        }\n\n        if (event.keyCode === 40) {\n          event.preventDefault();\n          console.log(\"Вниз\");\n          let currentId = parseInt(document.getElementsByClassName('active')[0].getAttribute(\"id\"));\n          let updisp = document.getElementById((currentId + 1).toString());\n\n          if (updisp !== null) {\n            tr_click(updisp.getAttribute(\"name\"));\n          }\n        }\n\n        if (event.keyCode === 13) {\n          const num = document.getElementsByClassName('active')[0].getAttribute(\"name\");\n          const status = document.getElementsByClassName('active')[0].getAttribute(\"status\");\n          console.log(\"Enter\");\n          tr_double_click({\n            Number: num,\n            Type: status\n          });\n        }\n      } catch (e) {}\n    };\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"\\u041D\\u0430\\u043A\\u043B\\u0430\\u0434\\u043D\\u044B\\u0435 \\u043D\\u0430 \\u0441\\u043A\\u043B\\u0430\\u0434\\u0435\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, this.props.store.storage.active !== null ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.update.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\")) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.update.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\")), React.createElement(\"div\", {\n      className: \"search_storage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"disp_data_label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u043D\\u043E\\u043C\\u0435\\u0440\\u0443\"), React.createElement(\"div\", {\n      className: \"disp_data_input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"pod_input\",\n      value: this.props.store.storage.search,\n      onChange: e => this.props.set_search_storagre(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }))), this.props.store.storage.list.length !== 0 ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"\\u0414\\u0430\\u0442\\u0430\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"\\u0422\\u0438\\u043F\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"\\u0417\\u0430\\u043A\\u0430\\u0437\\u0447\\u0438\\u043A\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u043D\\u0430\\u043A\\u043B\\u0430\\u0434\\u043D\\u043E\\u0439\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"\\u0410\\u0434\\u0440\\u0435\\u0441\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u043D\\u043E\\u0435 \\u043B\\u0438\\u0446\\u043E\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"\\u041A \\u043E\\u043F\\u043B\\u0430\\u0442\\u0435\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043C\\u0435\\u0441\\u0442\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"\\u0412\\u0435\\u0441\"))), this.props.store.storage.list.filter(el => this.props.store.storage.search === \"\" || el.Number.indexOf(this.props.store.storage.search) !== -1).map((disp, index) => React.createElement(\"tbody\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, disp.Number === this.props.store.storage.active ? React.createElement(\"tr\", {\n      className: \"active\",\n      id: index,\n      name: disp.Number,\n      status: disp.Type,\n      onKeyDown: console.log('Key down'),\n      onClick: this.tr_click.bind(this, disp.Number),\n      onTouchStart: this.handleButtonPress.bind(this),\n      onTouchEnd: this.handleButtonRelease.bind(this),\n      onDoubleClick: this.tr_double_click.bind(this, disp),\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, disp.Date), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, disp.Type), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, disp.Customer), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, disp.Number), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, disp.Adress), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, disp.Phone), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, disp.Person), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, disp.COD), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, disp.total), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, disp.weight)) : React.createElement(\"tr\", {\n      onClick: this.tr_click.bind(this, disp.Number),\n      id: index,\n      name: disp.Number,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, disp.Date), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, disp.Type), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, disp.Customer), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, disp.Number), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, disp.Adress), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, disp.Phone), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, disp.Person), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, disp.COD), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, disp.total), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, disp.weight)))))) : ''));\n  }\n\n}\n\n;\nexport default connect(state => ({\n  store: state\n}), dispatch => ({\n  set_search_storagre: param => {\n    dispatch({\n      type: 'set_search_storagre',\n      payload: param\n    });\n  },\n  set_data_disp: param => {\n    dispatch({\n      type: 'set_data_disp',\n      payload: param\n    });\n  },\n  set_last_window: () => {\n    dispatch({\n      type: 'set_last_window',\n      payload: \"storage\"\n    });\n  },\n  set_active_window: param => {\n    dispatch({\n      type: 'set_active_window',\n      payload: param\n    });\n  },\n  set_list_storage: param => {\n    dispatch({\n      type: 'set_list_storage',\n      payload: param\n    });\n  },\n  set_active_storage: param => {\n    dispatch({\n      type: 'set_active_storage',\n      payload: param\n    });\n  },\n  set_action: param => {\n    dispatch({\n      type: 'set_action',\n      payload: param\n    });\n  }\n}))(Screen);","map":{"version":3,"sources":["/Users/elias/Documents/kinetika/src/screen/storage.js"],"names":["React","connect","get_data","Screen","Component","constructor","props","update","set_active_window","list_data","userkey","store","login","then","result","set_list_storage","err","console","log","tr_double_click","disp","data","status","Type","num","Number","set_data_disp","set_last_window","set_action","datefrom","createRef","dateto","handleButtonPress","buttonPressTimer","setTimeout","alert","handleButtonRelease","clearTimeout","tr_click","set_active_storage","render","name","document","onkeydown","event","keyCode","preventDefault","currentId","parseInt","getElementsByClassName","getAttribute","updisp","getElementById","toString","e","storage","active","bind","search","set_search_storagre","target","value","list","length","filter","el","indexOf","map","index","Date","Customer","Adress","Phone","Person","COD","total","weight","state","dispatch","param","type","payload"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\n\nimport { get_data } from './../common/common_modules'\n\n\nclass Screen extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.datefrom = React.createRef();\n    this.dateto = React.createRef();\n  }\n\n  handleButtonPress () {\n    this.buttonPressTimer = setTimeout(() => alert('long press activated'), 1500);\n  }\n\n  handleButtonRelease () {\n    clearTimeout(this.buttonPressTimer);\n  }\n\n  update = () => {\n    this.props.set_active_window(\"wait\");\n    const list_data = { userkey: this.props.store.login.userkey };\n\n    get_data('list', list_data).then(\n      (result) => {\n        this.props.set_list_storage(result);\n        this.props.set_active_window(\"storage\");\n      },\n      (err) => { console.log(err) }\n    );\n\n  };\n\n\n  tr_click(num) {\n    console.log('num is ', num);\n    this.props.set_active_storage(num);\n  };\n\n  tr_double_click = async (disp) => {\n    this.props.set_active_window(\"wait\");\n\n    const data = {\n      userkey: this.props.store.login.userkey,\n      status: disp.Type,\n      num: disp.Number\n    };\n\n    get_data('dispatch', data).then(\n      (result) => {\n        console.log(result)\n        this.props.set_data_disp(result);\n        this.props.set_active_window(\"disp\");\n        this.props.set_last_window(\"storage\");\n        this.props.set_action(\"deliver\");\n      },\n      (err) => { console.log(err) }\n    );\n\n\n  };\n\n  render() {\n\n    const tr_click = (name) => {\n      this.tr_click(name);\n    };\n\n    const tr_double_click = (disp) => {\n      this.tr_double_click(disp);\n    };\n\n    document.onkeydown = function (event) {\n      try {\n        if (event.keyCode === 38) {\n          event.preventDefault();\n          console.log(\"Вверх\")\n          let currentId = parseInt(document.getElementsByClassName('active')[0].getAttribute(\"id\"));\n          let updisp = document.getElementById((currentId - 1).toString());\n          if (updisp !== null) { tr_click(updisp.getAttribute(\"name\")); }\n        }\n        if (event.keyCode === 40) {\n          event.preventDefault();\n          console.log(\"Вниз\")\n          let currentId = parseInt(document.getElementsByClassName('active')[0].getAttribute(\"id\"));\n          let updisp = document.getElementById((currentId + 1).toString());\n          if (updisp !== null) { tr_click(updisp.getAttribute(\"name\")); }\n        }\n        if (event.keyCode === 13) {\n          const num = document.getElementsByClassName('active')[0].getAttribute(\"name\");\n          const status = document.getElementsByClassName('active')[0].getAttribute(\"status\");\n          console.log(\"Enter\")\n          tr_double_click({ Number: num, Type: status });\n        }\n\n      } catch (e) { }\n    };\n\n    return (\n      <div>\n        <div>\n\n          <h3>Накладные на складе</h3>\n\n        </div>\n        <div>\n          {this.props.store.storage.active !== null ? (<div>\n            <button onClick={this.update.bind(this)} >Обновить данные</button>\n            {/* <button >Скопировать</button>\n                      <button >Печать</button> */}\n          </div>) : (<div>\n            <button onClick={this.update.bind(this)} >Обновить данные</button>\n            {/* <button disabled >Скопировать</button>\n                      <button disabled >Печать</button> */}\n          </div>)}\n          <div className=\"search_storage\">\n          <div className=\"disp_data_label\">Поиск по номеру</div>\n          <div className=\"disp_data_input\"><input className=\"pod_input\" value={this.props.store.storage.search} onChange={e => this.props.set_search_storagre(e.target.value)}></input></div>\n          </div>\n          {this.props.store.storage.list.length !== 0 ? (\n            <div>\n\n              <table>\n\n                <thead>\n                  <tr >\n                    <th>Дата</th>\n                    <th>Тип</th>\n                    <th>Заказчик</th>\n                    <th>Номер накладной</th>\n                    <th>Адрес</th>\n                    <th>Телефон</th>\n                    <th>Контактное лицо</th>\n                    <th>К оплате</th>\n                    <th>Количество мест</th>\n                    <th>Вес</th>\n\n                  </tr>\n                </thead>\n\n                {this.props.store.storage.list.filter((el)=>this.props.store.storage.search === \"\" || el.Number.indexOf(this.props.store.storage.search) !== -1).map((disp, index) =>\n                  <tbody key={index}>\n\n                    {disp.Number === this.props.store.storage.active ? (\n                      <tr className='active' id={index} name={disp.Number} status={disp.Type} onKeyDown={console.log('Key down')} \n                      onClick={this.tr_click.bind(this, disp.Number)} \n                      onTouchStart={this.handleButtonPress.bind(this)} \n                      onTouchEnd={this.handleButtonRelease.bind(this)} \n                      onDoubleClick={this.tr_double_click.bind(this, disp)} key={index} >\n\n                        <td>{disp.Date}</td>\n                        <td>{disp.Type}</td>\n                        <td>{disp.Customer}</td>\n                        <td>{disp.Number}</td>\n                        <td>{disp.Adress}</td>\n                        <td>{disp.Phone}</td>\n                        <td>{disp.Person}</td>\n                        <td>{disp.COD}</td>\n                        <td>{disp.total}</td>\n                        <td>{disp.weight}</td>\n\n\n                      </tr>) : (<tr onClick={this.tr_click.bind(this, disp.Number)} id={index} name={disp.Number} key={index} >\n                        <td>{disp.Date}</td>\n                        <td>{disp.Type}</td>\n                        <td>{disp.Customer}</td>\n                        <td>{disp.Number}</td>\n                        <td>{disp.Adress}</td>\n                        <td>{disp.Phone}</td>\n                        <td>{disp.Person}</td>\n                        <td>{disp.COD}</td>\n                        <td>{disp.total}</td>\n                        <td>{disp.weight}</td>\n\n                      </tr>)}\n                  </tbody>\n\n                )}\n\n              </table>\n            </div>) : ('')}\n        </div>\n      </div>\n    );\n  }\n};\n\nexport default connect(\n  state => ({\n    store: state\n  }),\n  dispatch => ({\n    set_search_storagre: (param) => { dispatch({ type: 'set_search_storagre', payload: param }) },\n    set_data_disp: (param) => { dispatch({ type: 'set_data_disp', payload: param }) },\n    set_last_window: () => { dispatch({ type: 'set_last_window', payload: \"storage\" }) },\n    set_active_window: (param) => { dispatch({ type: 'set_active_window', payload: param }) },\n    set_list_storage: (param) => { dispatch({ type: 'set_list_storage', payload: param }) },\n    set_active_storage: (param) => { dispatch({ type: 'set_active_storage', payload: param }) },\n    set_action: (param) => { dispatch({ type: 'set_action', payload: param }) },\n  })\n)(Screen);\n"]},"metadata":{},"sourceType":"module"}