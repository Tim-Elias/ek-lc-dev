{"ast":null,"code":"var _jsxFileName = \"/home/saint/123/ek-lc-dev/src/m_screen/m_send_manifest.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport '../screen/send_manifest.css';\nimport '../App.css';\nimport { Header, Modal, Table, Button } from 'semantic-ui-react';\nimport { get_data } from './../common/common_modules';\n\nclass Screen extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.search = () => {\n      this.props.set_search_send_manifest_error(\"\");\n      const num = this.props.store.send_manifest.search;\n\n      if (this.props.store.storage.list.filter(el => {\n        if (el.selected && el.Number === num) {\n          return el;\n        }\n      }).length === 1) {\n        this.props.set_search_send_manifest_error(`Накладная ${num} уже добавлена`);\n      } else if (this.props.store.storage.list.filter(el => {\n        if (!el.selected && el.Number === num) {\n          return el;\n        }\n      }).length === 1) {\n        this.props.select_disp(num);\n      } else if (this.props.store.storage.list.filter(el => {\n        if (!el.selected && el.Number === num) {\n          return el;\n        }\n      }).length === 0) {\n        this.props.set_search_send_manifest_error(`Накладная ${num} не найдена`);\n      }\n    };\n\n    this.send_manifest = () => {\n      this.props.set_active_window(\"wait\");\n      const dispatches = this.props.store.storage.list.filter(el => {\n        if (el.selected) return el;\n      }).map(disp => {\n        return disp.Number;\n      });\n      const data = {\n        userkey: this.props.store.login.userkey,\n        dispatches: dispatches,\n        storehouse: this.props.store.send_manifest.storehouse\n      };\n      get_data('sendmanifest', data).then(result => {\n        get_data('list', {\n          userkey: this.props.store.login.userkey\n        }).then(result => {\n          this.props.set_list_storage(result);\n          this.props.set_active_window(\"storage\");\n        }, err => {\n          this.props.set_active_window(\"storage\");\n          console.log(err);\n        });\n      }, err => {\n        this.props.set_active_window(\"send_manifest\");\n        this.props.set_search_error(err);\n      });\n    };\n  }\n\n  render() {\n    document.onkeydown = function (event) {};\n\n    const search = () => {\n      this.search();\n    };\n\n    document.onkeydown = function (event) {\n      try {\n        if (event.keyCode === 13) {\n          search();\n        }\n      } catch (e) {}\n    };\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"mobile_heading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"\\u0424\\u043E\\u0440\\u043C\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0438\\u0441\\u0445\\u043E\\u0434\\u044F\\u0449\\u0435\\u0433\\u043E \\u043C\\u0430\\u043D\\u0438\\u0444\\u0435\\u0441\\u0442\\u0430\"), React.createElement(\"div\", {\n      className: \"mobile_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      value: this.props.store.send_manifest.storehouse,\n      onChange: e => this.props.set_send_manifest_storehouse(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"000000001\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"\\u041D\\u043E\\u0432\\u043E\\u0441\\u0438\\u0431\\u0438\\u0440\\u0441\\u043A, \\u041A\\u043E\\u043C\\u043C\\u0443\\u043D\\u0438\\u0441\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0430\\u044F 7\"), React.createElement(\"option\", {\n      value: \"000000006\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"\\u041A\\u0440\\u0430\\u0441\\u043D\\u043E\\u044F\\u0440\\u0441\\u043A \\u041A\\u0430\\u0440\\u0430\\u0443\\u043B\\u044C\\u043D\\u0430\\u044F 4\\u0441\\u0442\\u04401\"), React.createElement(\"option\", {\n      value: \"000000002\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"\\u041A\\u0435\\u043C\\u0435\\u0440\\u043E\\u0432\\u043E \\u0420\\u0443\\u043A\\u0430\\u0432\\u0438\\u0448\\u043D\\u0438\\u043A\\u043E\\u0432\\u0430 26\"), React.createElement(\"option\", {\n      value: \"000000009\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"\\u0411\\u0430\\u0440\\u043D\\u0430\\u0443\\u043B, \\u041C\\u043E\\u043B\\u043E\\u0434\\u0435\\u0436\\u043D\\u0430\\u044F 111\"), React.createElement(\"option\", {\n      value: \"000000008\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"\\u041E\\u043C\\u0441\\u043A, \\u041F\\u043E\\u0442\\u0430\\u043D\\u0438\\u043D\\u0430 15\"), React.createElement(\"option\", {\n      value: \"000000007\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"\\u0422\\u043E\\u043C\\u0441\\u043A, \\u0413\\u0435\\u0440\\u0446\\u0435\\u043D\\u0430 13\\u0430\")), React.createElement(\"div\", {\n      className: \"search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"search_label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u043E\\u043C\\u0435\\u0440:\"), React.createElement(\"div\", {\n      className: \"search_data\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      value: this.props.store.send_manifest.search,\n      className: \"search_data_input\",\n      onChange: e => this.props.set_search_send_manifest(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"search_button_area\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      id: \"search_button\",\n      onClick: this.search.bind(this),\n      className: \"send_pod\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\")), React.createElement(\"div\", {\n      className: \"search_error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, this.props.store.reciept.error), this.props.store.storage.list.filter(el => {\n      if (el.selected) return el;\n    }).length !== 0 ? React.createElement(\"div\", {\n      key: this.el,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, this.props.store.storage.list.filter(el => {\n      if (el.selected) return el;\n    }).map((disp, index) => React.createElement(\"div\", {\n      key: el,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"disp_address_data_header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"\\u041D\\u0430\\u043A\\u043B\\u0430\\u0434\\u043D\\u0430\\u044F \\u2116 \", disp.Number), React.createElement(\"div\", {\n      className: \"disp_address_data_el\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"mobile_disp_data_label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"\\u0414\\u0430\\u0442\\u0430:\"), React.createElement(\"div\", {\n      className: \"mobile_disp_data_el\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, disp.Date), React.createElement(\"div\", {\n      className: \"mobile_disp_data_label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"\\u0422\\u0438\\u043F:\"), React.createElement(\"div\", {\n      className: \"mobile_disp_data_el\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, disp.Type), React.createElement(\"div\", {\n      className: \"mobile_disp_data_label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u044F:\"), React.createElement(\"div\", {\n      className: \"mobile_disp_data_el\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, disp.Customer), React.createElement(\"div\", {\n      className: \"mobile_disp_data_label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"\\u0410\\u0434\\u0440\\u0435\\u0441:\"), React.createElement(\"div\", {\n      className: \"mobile_disp_data_el\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, disp.Adress), React.createElement(\"div\", {\n      className: \"mobile_disp_data_label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D:\"), React.createElement(\"div\", {\n      className: \"mobile_disp_data_el\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, disp.Phone), React.createElement(\"div\", {\n      className: \"mobile_disp_data_label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u043D\\u043E\\u0435 \\u043B\\u0438\\u0446\\u043E:\"), React.createElement(\"div\", {\n      className: \"mobile_disp_data_el\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, disp.Person), React.createElement(\"div\", {\n      className: \"mobile_disp_data_label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"\\u041A \\u043E\\u043F\\u043B\\u0430\\u0442\\u0435:\"), React.createElement(\"div\", {\n      className: \"mobile_disp_data_el\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, disp.COD), React.createElement(\"div\", {\n      className: \"mobile_disp_data_label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043C\\u0435\\u0441\\u0442:\"), React.createElement(\"div\", {\n      className: \"mobile_disp_data_el\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, disp.total), React.createElement(\"div\", {\n      className: \"mobile_disp_data_label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"\\u0412\\u0435\\u0441:\"), React.createElement(\"div\", {\n      className: \"mobile_disp_data_el\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, disp.weight))))) : '', React.createElement(\"div\", {\n      className: \"disp_data_el\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u0430 \\u0441\\u043A\\u043B\\u0430\\u0434: \\u043D\\u0430\\u043A\\u043B\\u0430\\u0434\\u043D\\u044B\\u0445: \", this.props.store.storage.list.filter(el => {\n      if (el.selected) return el;\n    }).length, \" (\\u043C\\u0435\\u0441\\u0442: \", this.props.store.storage.list.filter(el => {\n      if (el.selected) return el;\n    }).reduce((sum, el) => {\n      return sum + parseInt(el.total);\n    }, 0), \")\"), React.createElement(\"button\", {\n      onClick: this.send_manifest.bind(this),\n      className: \"send_manifest\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0438 \\u0437\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\")));\n  }\n\n}\n\n;\nexport default connect(state => ({\n  store: state\n}), dispatch => ({\n  set_active_window: param => {\n    dispatch({\n      type: 'set_active_window',\n      payload: param\n    });\n  },\n  set_send_manifest_storehouse: param => {\n    dispatch({\n      type: 'set_send_manifest_storehouse',\n      payload: param\n    });\n  },\n  set_search_send_manifest: param => {\n    dispatch({\n      type: 'set_search_send_manifest',\n      payload: param\n    });\n  },\n  set_search_send_manifest_error: param => {\n    dispatch({\n      type: 'set_search_error',\n      payload: param\n    });\n  },\n  select_disp: param => {\n    dispatch({\n      type: 'select_disp',\n      payload: param\n    });\n  },\n  set_list_storage: param => {\n    dispatch({\n      type: 'set_list_storage',\n      payload: param\n    });\n  }\n}))(Screen);","map":{"version":3,"sources":["/home/saint/123/ek-lc-dev/src/m_screen/m_send_manifest.js"],"names":["React","connect","Header","Modal","Table","Button","get_data","Screen","Component","search","props","set_search_send_manifest_error","num","store","send_manifest","storage","list","filter","el","selected","Number","length","select_disp","set_active_window","dispatches","map","disp","data","userkey","login","storehouse","then","result","set_list_storage","err","console","log","set_search_error","render","document","onkeydown","event","keyCode","e","set_send_manifest_storehouse","target","value","set_search_send_manifest","bind","reciept","error","index","Date","Type","Customer","Adress","Phone","Person","COD","total","weight","reduce","sum","parseInt","state","dispatch","param","type","payload"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport '../screen/send_manifest.css';\nimport '../App.css';\nimport { Header, Modal, Table, Button } from 'semantic-ui-react';\nimport { get_data } from './../common/common_modules';\n\n\nclass Screen extends React.Component {\n\n    search = () => {\n        this.props.set_search_send_manifest_error(\"\")\n        const num = this.props.store.send_manifest.search\n        if (this.props.store.storage.list.filter((el) => { if (el.selected && el.Number === num) { return (el) } }).length === 1) {\n            this.props.set_search_send_manifest_error(`Накладная ${num} уже добавлена`)\n        }\n\n        else if (this.props.store.storage.list.filter((el) => { if (!el.selected && el.Number === num) { return (el) } }).length === 1) {\n            this.props.select_disp(num)\n        }\n\n        else if (this.props.store.storage.list.filter((el) => { if (!el.selected && el.Number === num) { return (el) } }).length === 0) {\n            this.props.set_search_send_manifest_error(`Накладная ${num} не найдена`)\n        }\n\n    }\n\n    send_manifest = () => {\n\n        this.props.set_active_window(\"wait\");\n\n        const dispatches = this.props.store.storage.list.filter((el) => { if (el.selected) return el }).map((disp) => { return disp.Number })\n        const data = {\n            userkey: this.props.store.login.userkey,\n            dispatches: dispatches,\n            storehouse: this.props.store.send_manifest.storehouse,\n        };\n\n        get_data('sendmanifest', data).then(\n            (result) => {\n\n                get_data('list', { userkey: this.props.store.login.userkey }).then(\n                    (result) => {\n                        this.props.set_list_storage(result);\n                        this.props.set_active_window(\"storage\");\n                    },\n\n                    (err) => {\n                        this.props.set_active_window(\"storage\");\n                        console.log(err)\n                    }\n                );\n            },\n            (err) => {\n                this.props.set_active_window(\"send_manifest\");\n                this.props.set_search_error(err)\n            }\n        );\n    }\n\n\n    render() {\n        document.onkeydown = function (event) { }\n\n        const search = () => {\n            this.search();\n        };\n\n        document.onkeydown = function (event) {\n            try {\n\n                if (event.keyCode === 13) {\n                    search()\n                }\n\n            } catch (e) { }\n        };\n\n        return (\n            <div>\n                <div className=\"mobile_heading\">Формирование исходящего манифеста</div>\n                <div className=\"mobile_container\">\n                    <select value={this.props.store.send_manifest.storehouse} onChange={e => this.props.set_send_manifest_storehouse(e.target.value)}>\n                        <option value=\"000000001\">Новосибирск, Коммунистическая 7</option>\n                        <option value=\"000000006\">Красноярск Караульная 4стр1</option>\n                        <option value=\"000000002\">Кемерово Рукавишникова 26</option>\n                        <option value=\"000000009\">Барнаул, Молодежная 111</option>\n                        <option value=\"000000008\">Омск, Потанина 15</option>\n                        <option value=\"000000007\">Томск, Герцена 13а</option>\n                    </select>\n\n                    <div className=\"search\">\n                        <div className=\"search_label\">Введите номер:</div>\n                        <div className=\"search_data\"><input value={this.props.store.send_manifest.search} className=\"search_data_input\" onChange={e => this.props.set_search_send_manifest(e.target.value)}></input></div>\n                    </div>\n\n                    <div className=\"search_button_area\">\n                        <button id=\"search_button\" onClick={this.search.bind(this)} className=\"send_pod\">Добавить</button>\n                    </div>\n\n                    <div className=\"search_error\">{this.props.store.reciept.error}</div>\n\n                    {this.props.store.storage.list.filter((el) => { if (el.selected) return el }).length !== 0 ? (\n                        <div key={this.el}>\n                            \n                            {this.props.store.storage.list.filter((el) => { if (el.selected) return el }).map((disp, index) =>\n                            <div key={el}>\n                                <div className=\"disp_address_data_header\">Накладная № {disp.Number}</div>\n                                <div className=\"disp_address_data_el\">\n                                    <div className=\"mobile_disp_data_label\">Дата:</div>\n                                    <div className=\"mobile_disp_data_el\">{disp.Date}</div>\n                                    <div className=\"mobile_disp_data_label\">Тип:</div>\n                                    <div className=\"mobile_disp_data_el\">{disp.Type}</div>\n                                    <div className=\"mobile_disp_data_label\">Компания:</div>\n                                    <div className=\"mobile_disp_data_el\">{disp.Customer}</div>\n                                    <div className=\"mobile_disp_data_label\">Адрес:</div>\n                                    <div className=\"mobile_disp_data_el\">{disp.Adress}</div>\n                                    <div className=\"mobile_disp_data_label\">Телефон:</div>\n                                    <div className=\"mobile_disp_data_el\">{disp.Phone}</div>\n                                    <div className=\"mobile_disp_data_label\">Контактное лицо:</div>\n                                    <div className=\"mobile_disp_data_el\">{disp.Person}</div>\n                                    <div className=\"mobile_disp_data_label\">К оплате:</div>\n                                    <div className=\"mobile_disp_data_el\">{disp.COD}</div>\n                                    <div className=\"mobile_disp_data_label\">Количество мест:</div>\n                                    <div className=\"mobile_disp_data_el\">{disp.total}</div>\n                                    <div className=\"mobile_disp_data_label\">Вес:</div>\n                                    <div className=\"mobile_disp_data_el\">{disp.weight}</div>\n                                </div>\n                            </div>)}\n\n                        </div>) : ('')}\n\n                    <div className=\"disp_data_el\">Отправить на склад: накладных: {this.props.store.storage.list.filter((el) => { if (el.selected) return el }).length} (мест: {this.props.store.storage.list.filter((el) => { if (el.selected) return el }).reduce((sum, el) => { return sum + parseInt(el.total) }, 0)})</div>\n                    <button onClick={this.send_manifest.bind(this)} className=\"send_manifest\">Отправить и закрыть</button>\n\n                </div>\n            </div>\n        );\n    }\n};\n\nexport default connect(\n    state => ({\n        store: state\n    }),\n    dispatch => ({\n        set_active_window: (param) => { dispatch({ type: 'set_active_window', payload: param }) },\n        set_send_manifest_storehouse: (param) => { dispatch({ type: 'set_send_manifest_storehouse', payload: param }) },\n        set_search_send_manifest: (param) => { dispatch({ type: 'set_search_send_manifest', payload: param }) },\n        set_search_send_manifest_error: (param) => { dispatch({ type: 'set_search_error', payload: param }) },\n        select_disp: (param) => { dispatch({ type: 'select_disp', payload: param }) },\n        set_list_storage: (param) => { dispatch({ type: 'set_list_storage', payload: param }) },\n    })\n)(Screen);"]},"metadata":{},"sourceType":"module"}