{"ast":null,"code":"var _jsxFileName = \"/Users/elias/Documents/ek-lc-dev-1/ek-lc-dev/src/m_screen/m_storage_reciept.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Sound from 'react-sound';\nimport done_sound from './../common/ping.mp3';\nimport err_sound from './../common/err.mp3';\nimport funk_sound from './../common/funk.mp3';\nimport { get_data } from './../common/common_modules';\nimport './mobile.css';\nimport './mobile_storage_reciept.css';\n\nclass Screen extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.done_sound_play = () => {\n      this.props.storage_reciept_set_done_sound(Sound.status.PLAYING);\n    };\n\n    this.err_sound_play = () => {\n      this.props.storage_reciept_set_err_sound(Sound.status.PLAYING);\n    };\n\n    this.funk_sound_play = () => {\n      this.props.storage_reciept_set_funk_sound(Sound.status.PLAYING);\n    };\n\n    this.send_req = () => {\n      if (this.props.store.storage_reciept.barcode.substring(0, 9) === \"0000-0000\") {\n        let zone = this.props.store.storage_reciept.barcode.substring(10);\n        let find_zone = this.props.store.storage_reciept.zone_list.find(el => el === zone);\n\n        if (find_zone === undefined) {\n          this.props.storage_reciept_set_barcode('');\n          this.props.storage_reciept_set_status_type('err');\n          this.props.storage_reciept_set_status_message('Зона хранения не найдена');\n          this.err_sound_play();\n        } else {\n          this.props.storage_reciept_set_selected_zone(zone);\n          this.props.storage_reciept_set_barcode('');\n          this.props.storage_reciept_set_status_message('');\n          this.props.storage_reciept_set_status_type(null);\n          this.funk_sound_play();\n        }\n      } else {\n        this.props.set_active_window(\"wait\");\n        const data = {\n          userkey: this.props.store.login.userkey,\n          barcode: this.props.store.storage_reciept.barcode,\n          zone: this.props.store.storage_reciept.selected_zone,\n          storage: this.props.store.storage_reciept.storage.id\n        };\n        get_data('storagereciept', data).then(result => {\n          this.props.set_active_window(\"storage_reciept\");\n          this.props.storage_reciept_set_result(result);\n          this.props.storage_reciept_set_barcode('');\n\n          if (result.status_type === 'ok') {\n            this.done_sound_play();\n          } else {\n            this.err_sound_play();\n          }\n        }, err => {\n          this.props.set_active_window(\"storage_reciept\");\n          this.props.storage_reciept_set_result({\n            status_type: 'err',\n            status_message: err\n          });\n          this.err_sound_play();\n        });\n      }\n    };\n  }\n\n  render() {\n    let done_sound_status;\n\n    if (this.props.store.storage_reciept.done_sound === undefined) {\n      done_sound_status = Sound.status.STOPPED;\n    } else {\n      done_sound_status = this.props.store.storage_reciept.done_sound;\n    }\n\n    let funk_sound_status;\n\n    if (this.props.store.storage_reciept.funk_sound === undefined) {\n      funk_sound_status = Sound.status.STOPPED;\n    } else {\n      funk_sound_status = this.props.store.storage_reciept.funk_sound;\n    }\n\n    let err_sound_status;\n\n    if (this.props.store.storage_reciept.err_sound === undefined) {\n      err_sound_status = Sound.status.STOPPED;\n    } else {\n      err_sound_status = this.props.store.storage_reciept.err_sound;\n    }\n\n    const send_req = this.send_req;\n\n    document.onkeydown = function (event) {\n      try {\n        if (event.keyCode === 13) {\n          send_req();\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"mobile_heading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"\\u041F\\u0440\\u0438\\u0435\\u043C\\u043A\\u0430 \\u043D\\u0430 \\u0441\\u043A\\u043B\\u0430\\u0434\"), React.createElement(\"div\", {\n      className: \"storage_reciept_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"storage_reciept_item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"\\u0422\\u0435\\u043A\\u0443\\u0449\\u0438\\u0439 \\u0441\\u043A\\u043B\\u0430\\u0434: \", this.props.store.storage_reciept.storage.name), React.createElement(\"div\", {\n      className: \"storage_reciept_item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"\\u0417\\u043E\\u043D\\u0430 \\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\u0438\\u044F: \", this.props.store.storage_reciept.selected_zone), React.createElement(\"input\", {\n      className: \"storage_reciept_input\",\n      autoFocus: true,\n      value: this.props.store.storage_reciept.barcode,\n      onChange: e => {\n        this.props.storage_reciept_set_barcode(e.target.value);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"storage_reciept_button\",\n      onClick: this.send_req.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"\\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u044C\"), this.props.store.storage_reciept.status_type === \"ok\" ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"\\u041D\\u0430\\u043A\\u043B\\u0430\\u0434\\u043D\\u0430\\u044F: \", this.props.store.storage_reciept.num, \" \"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"\\u0417\\u0430\\u0434\\u0430\\u0447\\u0430: \", this.props.store.storage_reciept.task_type, \" \"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"\\u0414\\u0430\\u0442\\u0430: \", this.props.store.storage_reciept.task_date), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"\\u041A\\u0443\\u0440\\u044C\\u0435\\u0440: \", this.props.store.storage_reciept.task_value), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"\\u0417\\u0430\\u043A\\u0430\\u0437\\u0447\\u0438\\u043A: \", this.props.store.storage_reciept.customer), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"\\u0413\\u043E\\u0440\\u043E\\u0434: \", this.props.store.storage_reciept.rec_city), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"\\u0410\\u0434\\u0440\\u0435\\u0441: \", this.props.store.storage_reciept.rec_adress), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"\\u0420\\u0430\\u0439\\u043E\\u043D: \", this.props.store.storage_reciept.rec_district), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0442\\u0435\\u043B\\u044C: \", this.props.store.storage_reciept.rec_name)) : null, this.props.store.storage_reciept.status_type === \"err\" ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, this.props.store.storage_reciept.status_message) : null, React.createElement(Sound, {\n      url: done_sound,\n      playStatus: done_sound_status,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }), React.createElement(Sound, {\n      url: err_sound,\n      playStatus: err_sound_status,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(Sound, {\n      url: funk_sound,\n      playStatus: funk_sound_status,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default connect(state => ({\n  store: state\n}), dispatch => ({\n  storage_reciept_set_barcode: param => {\n    dispatch({\n      type: 'storage_reciept_set_barcode',\n      payload: param\n    });\n  },\n  storage_reciept_set_result: param => {\n    dispatch({\n      type: 'storage_reciept_set_result',\n      payload: param\n    });\n  },\n  storage_reciept_set_selected_zone: param => {\n    dispatch({\n      type: 'storage_reciept_set_selected_zone',\n      payload: param\n    });\n  },\n  storage_reciept_set_done_sound: param => {\n    dispatch({\n      type: 'storage_reciept_set_done_sound',\n      payload: param\n    });\n  },\n  storage_reciept_set_err_sound: param => {\n    dispatch({\n      type: 'storage_reciept_set_err_sound',\n      payload: param\n    });\n  },\n  storage_reciept_set_funk_sound: param => {\n    dispatch({\n      type: 'storage_reciept_set_funk_sound',\n      payload: param\n    });\n  },\n  storage_reciept_set_status_message: param => {\n    dispatch({\n      type: 'storage_reciept_set_status_message',\n      payload: param\n    });\n  },\n  storage_reciept_set_status_type: param => {\n    dispatch({\n      type: 'storage_reciept_set_status_type',\n      payload: param\n    });\n  },\n  set_active_window: param => {\n    dispatch({\n      type: 'set_active_window',\n      payload: param\n    });\n  }\n}))(Screen);","map":{"version":3,"sources":["/Users/elias/Documents/ek-lc-dev-1/ek-lc-dev/src/m_screen/m_storage_reciept.js"],"names":["React","connect","Sound","done_sound","err_sound","funk_sound","get_data","Screen","Component","done_sound_play","props","storage_reciept_set_done_sound","status","PLAYING","err_sound_play","storage_reciept_set_err_sound","funk_sound_play","storage_reciept_set_funk_sound","send_req","store","storage_reciept","barcode","substring","zone","find_zone","zone_list","find","el","undefined","storage_reciept_set_barcode","storage_reciept_set_status_type","storage_reciept_set_status_message","storage_reciept_set_selected_zone","set_active_window","data","userkey","login","selected_zone","storage","id","then","result","storage_reciept_set_result","status_type","err","status_message","render","done_sound_status","STOPPED","funk_sound_status","err_sound_status","document","onkeydown","event","keyCode","e","console","log","name","target","value","bind","num","task_type","task_date","task_value","customer","rec_city","rec_adress","rec_district","rec_name","state","dispatch","param","type","payload"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport Sound from 'react-sound';\nimport done_sound from './../common/ping.mp3';\nimport err_sound from './../common/err.mp3';\nimport funk_sound from './../common/funk.mp3';\nimport { get_data } from './../common/common_modules';\nimport './mobile.css';\nimport './mobile_storage_reciept.css';\n\nclass Screen extends React.Component {\n\n    done_sound_play = () => {\n        this.props.storage_reciept_set_done_sound(Sound.status.PLAYING)\n    }\n\n    err_sound_play = () => {\n        this.props.storage_reciept_set_err_sound(Sound.status.PLAYING)\n    }\n\n    funk_sound_play = () => {\n        this.props.storage_reciept_set_funk_sound(Sound.status.PLAYING)\n    }\n\n    send_req = () => { \n\n        if (this.props.store.storage_reciept.barcode.substring(0, 9) === \"0000-0000\") {\n            let zone = this.props.store.storage_reciept.barcode.substring(10)\n            let find_zone = this.props.store.storage_reciept.zone_list.find(el => el === zone)\n            if (find_zone === undefined) {\n                this.props.storage_reciept_set_barcode('')\n                this.props.storage_reciept_set_status_type('err')\n                this.props.storage_reciept_set_status_message('Зона хранения не найдена')\n                this.err_sound_play()\n            } else {\n                this.props.storage_reciept_set_selected_zone(zone);\n                this.props.storage_reciept_set_barcode('')\n                this.props.storage_reciept_set_status_message('')\n                this.props.storage_reciept_set_status_type(null)\n                this.funk_sound_play()\n            }\n        } else {\n            \n            this.props.set_active_window(\"wait\");\n            \n            const data = {\n                userkey: this.props.store.login.userkey,\n                barcode: this.props.store.storage_reciept.barcode,\n                zone: this.props.store.storage_reciept.selected_zone,\n                storage: this.props.store.storage_reciept.storage.id\n            }\n\n            get_data('storagereciept', data).then(\n                (result) => {\n                    this.props.set_active_window(\"storage_reciept\");\n                    this.props.storage_reciept_set_result(result);\n                    this.props.storage_reciept_set_barcode('')\n                    if (result.status_type === 'ok') {\n                        this.done_sound_play()\n                    } else {\n                        this.err_sound_play()\n                    }\n                },\n                (err) => {\n                    this.props.set_active_window(\"storage_reciept\");\n                    this.props.storage_reciept_set_result({\n                        status_type: 'err',\n                        status_message: err\n                    })\n                    this.err_sound_play()\n                }\n            );\n        }\n    }\n\n    render() {\n        let done_sound_status\n        if (this.props.store.storage_reciept.done_sound === undefined) {\n            done_sound_status = Sound.status.STOPPED\n        } else {\n            done_sound_status = this.props.store.storage_reciept.done_sound\n        }\n\n        let funk_sound_status\n        if (this.props.store.storage_reciept.funk_sound === undefined) {\n            funk_sound_status = Sound.status.STOPPED\n        } else {\n            funk_sound_status = this.props.store.storage_reciept.funk_sound\n        }\n\n        let err_sound_status\n        if (this.props.store.storage_reciept.err_sound === undefined) {\n            err_sound_status = Sound.status.STOPPED\n        } else {\n            err_sound_status = this.props.store.storage_reciept.err_sound\n        }\n\n        const send_req = this.send_req\n        document.onkeydown = function (event) {\n\n            try {\n                if (event.keyCode === 13) {\n                    send_req()\n                }\n            } catch (e) {\n                console.log(e)\n            }\n        };\n        \n        return (\n            <div>\n                <div className=\"mobile_heading\">\n                    Приемка на склад\n                </div>\n                <div className=\"storage_reciept_container\">\n                    <div className=\"storage_reciept_item\">\n                        Текущий склад: {this.props.store.storage_reciept.storage.name}\n                    </div>\n                    <div className=\"storage_reciept_item\">\n                        Зона хранения: {this.props.store.storage_reciept.selected_zone}\n                    </div>\n                    <input className=\"storage_reciept_input\" autoFocus value={this.props.store.storage_reciept.barcode} onChange={(e) => { this.props.storage_reciept_set_barcode(e.target.value) }} />\n                    <button className=\"storage_reciept_button\" onClick={this.send_req.bind(this)}>получить</button>\n                    {this.props.store.storage_reciept.status_type === \"ok\" ? (\n                        <div>\n                            <div>Накладная: {this.props.store.storage_reciept.num} </div>\n                            <div>Задача: {this.props.store.storage_reciept.task_type} </div>\n                            <div>Дата: {this.props.store.storage_reciept.task_date}</div>\n                            <div>Курьер: {this.props.store.storage_reciept.task_value}</div>\n                            <div>Заказчик: {this.props.store.storage_reciept.customer}</div>\n                            <div>Город: {this.props.store.storage_reciept.rec_city}</div>\n                            <div>Адрес: {this.props.store.storage_reciept.rec_adress}</div>\n                            <div>Район: {this.props.store.storage_reciept.rec_district}</div>\n                            <div>Получатель: {this.props.store.storage_reciept.rec_name}</div>\n                        </div>\n                    ) : (null)}\n                    {this.props.store.storage_reciept.status_type === \"err\" ? (\n                        <div>\n                            {this.props.store.storage_reciept.status_message}\n                        </div>\n                    ) : (null)}\n                    <Sound url={done_sound} playStatus={done_sound_status} />\n                    <Sound url={err_sound} playStatus={err_sound_status} />\n                    <Sound url={funk_sound} playStatus={funk_sound_status} />\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default connect(\n    state => ({\n        store: state\n    }),\n    dispatch => ({\n        storage_reciept_set_barcode: (param) => { dispatch({ type: 'storage_reciept_set_barcode', payload: param }) },\n        storage_reciept_set_result: (param) => { dispatch({ type: 'storage_reciept_set_result', payload: param }) },\n        storage_reciept_set_selected_zone: (param) => { dispatch({ type: 'storage_reciept_set_selected_zone', payload: param }) },\n        storage_reciept_set_done_sound: (param) => { dispatch({ type: 'storage_reciept_set_done_sound', payload: param }) },\n        storage_reciept_set_err_sound: (param) => { dispatch({ type: 'storage_reciept_set_err_sound', payload: param }) },\n        storage_reciept_set_funk_sound: (param) => { dispatch({ type: 'storage_reciept_set_funk_sound', payload: param }) },\n        storage_reciept_set_status_message: (param) => { dispatch({ type: 'storage_reciept_set_status_message', payload: param }) },\n        storage_reciept_set_status_type: (param) => { dispatch({ type: 'storage_reciept_set_status_type', payload: param }) },\n\n        set_active_window: (param) => { dispatch({ type: 'set_active_window', payload: param }) },\n    })\n)(Screen)\n\n"]},"metadata":{},"sourceType":"module"}